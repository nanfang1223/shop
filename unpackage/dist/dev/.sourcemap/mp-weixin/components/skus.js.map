{"version":3,"sources":["webpack:///F:/ss/components/skus.vue?f330","webpack:///F:/ss/components/skus.vue?f04e","webpack:///F:/ss/components/skus.vue?e9a3","webpack:///F:/ss/components/skus.vue?e103","uni-app:///components/skus.vue","webpack:///F:/ss/components/skus.vue?26d4","webpack:///F:/ss/components/skus.vue?dc27"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACkL;AAClL,gBAAgB,kMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4qB,CAAgB,utBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoDhsB;AACA,MADA,kBACA;AACA;AACA,2FADA;AAEA,sFAFA;AAGA,oFAHA;AAIA,uFAJA;AAKA,mFALA;AAMA,mFANA;;AAQA,yBARA;AASA,0BATA;AAUA,mBAVA;;AAYA,aAZA,EAYA;AACA,eAbA,EAaA;AACA,gBAdA,EAcA;AACA,qBAfA,EAeA;AACA,aAhBA,EAgBA;AACA,qBAjBA;;AAmBA,kBAnBA;AAoBA,sBApBA;AAqBA,uBArBA;AAsBA,qBAtBA;AAuBA,uBAvBA;AAwBA,kBAxBA;AAyBA,kBAzBA;AA0BA,gBA1BA;;AA4BA,GA9BA;AA+BA,SA/BA,qBA+BA;AACA;AACA,GAjCA;AAkCA,+CAlCA;AAmCA;AACA,YADA,sBACA;;AAEA;;AAEA;AACA,yCADA;AAEA,sCAFA;;;AAKA;AACA;;AAEA,KAbA;AAcA;AACA,eAfA,yBAeA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,GAHA;AAIA,KAtBA;AAuBA,WAvBA,qBAuBA;AACA;AACA;AACA;AACA,KA3BA;AA4BA;AACA,iBA7BA,2BA6BA;AACA;AACA;AACA;;AAEA;AACA;AACA,KApCA;AAqCA,YArCA,sBAqCA;AACA;AACA,KAvCA;AAwCA;;;AAGA,QA3CA,kBA2CA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,gDADA;AAEA,0BAFA;AAGA,wBAHA;;AAKA,SANA,MAMA;AACA;AACA,4CADA;AAEA,0BAFA;AAGA,wBAHA;;AAKA;AACA;AACA,KA7DA;;AA+DA;;;AAGA,WAlEA,qBAkEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,gDADA;AAEA,0BAFA;AAGA,wBAHA;;AAKA,SANA,MAMA;AACA;AACA;AACA,4CADA;AAEA,0BAFA;AAGA,wBAHA;;AAKA;AACA;AACA,KArFA;;AAuFA;;;AAGA,YA1FA,oBA0FA,GA1FA,EA0FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAnGA;;AAqGA;;;;AAIA,YAzGA,oBAyGA,MAzGA,EAyGA;AACA;AACA;;AAEA;AACA,oCALA,CAKA;;AAEA;AACA,4CADA,CACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KA5KA;;AA8KA;;;AAGA,qBAjLA,6BAiLA,GAjLA,EAiLA,KAjLA,EAiLA;AACA;;AAEA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AAEA;AACA,KA7LA;;AA+LA;;;AAGA,sBAlMA,8BAkMA,GAlMA,EAkMA,KAlMA,EAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KA9MA;;AAgNA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7NA;;AA+NA;;;;;AAKA;AACA;AACA;AACA,6CADA;AAEA,sBAFA;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAJA,EAIA,CAJA;AAKA,KA3PA;;AA6PA;;;;;;AAMA,eAnQA,uBAmQA,IAnQA,EAmQA,IAnQA,EAmQA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yCADA;AAEA,4BAFA;AAGA,8BAHA;AAIA,0BAJA;AAKA,8BALA;;AAOA;;AAEA;AACA,sBADA;AAEA,sBAFA;;AAIA,KArSA;AAsSA;;;AAGA,UAzSA,kBAySA,GAzSA,EAySA;AACA;AACA;AACA;AACA;AACA,SAHA,CAGA;;AAEA;AACA;AACA;AACA,KAnTA;;AAqTA;;;;AAIA,cAzTA,wBAyTA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KA3UA;;AA6UA,gBA7UA,wBA6UA,GA7UA,EA6UA;AACA;AACA;AACA;AACA;;AAEA;AACA,KApVA;;AAsVA;;;AAGA,eAzVA,uBAyVA,KAzVA,EAyVA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA;;;AAIA;AACA;AACA,wEADA;;AAGA;AACA;AACA;AACA,OA9BA;;AAgCA,SAhCA;AAiCA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAJA;AAKA,eANA;;AAQA;AACA;AACA,eAbA;AAcA;AACA,SApDA,EAgCA;AAqBA;;AAEA;AACA,KAjZA;;AAmZA;;;;AAIA,mBAvZA,6BAuZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAraA;;AAuaA;;;AAGA,gBA1aA,wBA0aA,QA1aA,EA0aA,IA1aA,EA0aA;AACA;AACA;AACA,wCADA;AAEA,iCAFA;AAGA,+BAHA;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAjcA;;AAmcA,eAncA,uBAmcA,GAncA,EAmcA,OAncA,EAmcA;AACA;AACA;AACA;AACA;AACA,aADA,CACA,MADA,EACA,EADA;AAEA,aAFA,CAEA,OAFA,EAEA,EAFA;AAGA,aAHA,CAGA,SAHA,EAGA,OAHA;AAIA,KA3cA;;AA6cA;;;;;AAKA,eAldA,uBAkdA,CAldA,EAkdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7dA;;AA+dA;;;;AAIA,cAneA,wBAmeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WANA;;AAQA;AACA;AACA;AACA;;AAEA;AACA,oCADA;AAEA,4BAFA;AAGA,yBAHA;;AAKA,OAzBA,MAyBA;AACA;AACA;;AAEA;;AAEA;;QAhhBA,EAnCA,E;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAAmvC,CAAgB,2vCAAG,EAAC,C;;;;;;;;;;;ACAvwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/skus.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./skus.vue?vue&type=template&id=14e6b9b1&\"\nvar renderjs\nimport script from \"./skus.vue?vue&type=script&lang=js&\"\nexport * from \"./skus.vue?vue&type=script&lang=js&\"\nimport style0 from \"./skus.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/skus.vue\"\nexport default component.exports","export * from \"-!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./skus.vue?vue&type=template&id=14e6b9b1&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./skus.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./skus.vue?vue&type=script&lang=js&\"","<template>\r\n    <div class=\"mask\" @touchmove.stop.prevent v-if=\"mask_display\">\r\n        <div class=\"mask_d\" :class=\"mask_display1 ? 'goodAnimate1' : mask_display ? 'goodAnimate' : ''\" v-if=\"mask_display\">\r\n            <div class=\"mask_guige\">\r\n                <div class=\"mask_one\" @touchmove.stop.prevent>\r\n                    <div class=\"mask_imgDiv\">\r\n                        <img v-if=\"loadImg\" @load=\"_loadImg()\" class=\"shangp\" :src=\"imgurl\" />\r\n                        <img v-if=\"!loadImg\" :src=\"load_img\" class=\"img\" />\r\n                    </div>\r\n                    <div class=\"mask_pric\">\r\n                        <p class=\"mask_price\">\r\n                            ￥\r\n                            <span class=\"font_30\">{{ price }}</span>\r\n                        </p>\r\n                        <p class=\"mask_pric_num \">{{ stock || language.skus.kucun}}{{ num }}</p>\r\n                    </div>\r\n                    <img class=\"cha\" :src=\"guan_img\" @tap=\"_mask_f()\" />\r\n                </div>\r\n                <scroll-view scroll-y=\"true\" class=\"mask_over\">\r\n                    <template v-if=\"sku_list.result && !sku_list.result['undefined']\">\r\n                        <div class='mask_two ' v-for=\"(item, key) in sku_list.result\" :key=\"key\" :class=\"{hl: highKeys[key]}\">\r\n                            <p>{{key}}</p>\r\n                            <ul>\r\n                                <template v-for=\"(value,i) in item\">\r\n                                    <li v-if=\"value.name!=undefined\" :key=\"i\" :class=\"{select: (!value.active)&&(!value.disabled),orange: value.active, back: value.disabled}\"\r\n                                     @tap='handleActive(key, value)'>\r\n                                        <div>{{ value.name }}</div>\r\n                                    </li>\r\n                                </template>\r\n                            </ul>\r\n                        </div>\r\n                    </template>\r\n                    \r\n                    <div class=\"mask_num\" v-if=\"!noNumb\">\r\n                        <p>{{ nums || language.skus.num}}</p>\r\n                        <div class=\"goods_mun\">\r\n                            <span class=\"goods_mun_span\" @tap=\"_reduce\"><img :src=\"numb == 1 ? jian_hui : jian_hei\" /></span>\r\n                            <span class=\"mun\">{{ numb }}</span>\r\n                            <span class=\"goods_mun_add\" @tap=\"_add\"><img :src=\"numb < num ? jia_hei : jia_hui\" /></span>\r\n                        </div>\r\n                    </div>\r\n                </scroll-view>\r\n            </div>\r\n        \r\n            <div class=\"mask_querenDiv\">\r\n\t\t     <div class=\"mask_quren gfdg\"  style=\"background-image: linear-gradient(to right, #FEBD02 , #FF612A);\" @tap=\"_confirm\">{{ confirm || language.skus.confirm}}\r\n\t\t\t </div></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                load_img: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/5-121204193R7.gif',\r\n                guan_img: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/guanbi2x.png',\r\n                jian_hei: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/jian2x.png',\r\n                jian_hui: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/jianhui2x.png',\r\n                jia_hei: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/jia+2x.png',\r\n                jia_hui: this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL + 'images/icon1/add+2x.png',\r\n                \r\n                mask_display: false,\r\n                mask_display1: false,\r\n                loadImg: true,\r\n                \r\n                num: '', //规格数量\r\n                price: '', //规格价格\r\n                imgurl: '', //规格图片\r\n                haveSkuBean: '', //选择规则属性\r\n                numb: 1, //规格选择的数量\r\n                skuBeanList: '',\r\n                \r\n                highKeys: {},\r\n                skuName: 'SkuID',\r\n                skuName1: 'Price',\r\n                skuName2: 'Pic',\r\n                skuName3: 'Stock',\r\n                spliter: ',',\r\n                sku_list: {},\r\n                result: {}\r\n            }\r\n        },\r\n        created(){\r\n            this.setLang();\r\n        },\r\n        props: [\"noNumb\",\"nums\",\"confirm\",\"stock\"],\r\n        methods: {\r\n            _confirm(){\r\n\t\t\r\n                if(this.sku_list.result['undefined']){\r\n\t\t\t\t\r\n                \tthis.haveSkuBean = {\r\n                \t\tcid: this.sku_list.items[0].sku,\r\n                \t\tskus: this.sku_list.items[0]\r\n                \t};\r\n\t\t\t\t\t  \r\n                }\r\n                this.$emit(\"confirm\",this.$data)\r\n              \r\n            },\r\n            //关闭遮罩层\r\n            _mask_false() {\r\n                this.overflow = 'scroll';\r\n                this.mask_display1 = true;\r\n                setTimeout(() => {\r\n                    this.mask_display = false;\r\n                    this.mask_display1 = false;\r\n                }, 500);\r\n            },\r\n            _mask_f() {\r\n                this.haveSkuBean = '';\r\n                this._mask_false();\r\n                this.overflow = 'scroll';\r\n            },\r\n            //打开遮罩层\r\n            _mask_display() {\r\n                if(this.sku_list.result){\r\n                    this.showResult()\r\n                }\r\n                \r\n                this.mask_display = true;\r\n                this.overflow = 'hidden';\r\n            },\r\n            _loadImg() {\r\n                this.loadImg = true;\r\n            },\r\n            /* \r\n                增加购买量\r\n            */\r\n            _add() {\r\n                if (this.numb < this.num && Boolean(this.haveSkuBean)) {\r\n                    this.numb++;\r\n                } else {\r\n                    if (!this.haveSkuBean) {\r\n                        uni.showToast({\r\n                            title: this.language.skus.chooseTips,\r\n                            duration: 1000,\r\n                            icon: 'none'\r\n                        });\r\n                    } else {\r\n                        uni.showToast({\r\n                            title: this.language.skus.maxNum,\r\n                            duration: 1000,\r\n                            icon: 'none'\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            \r\n            /* \r\n                减少购买量\r\n            */\r\n            _reduce() {\r\n                if (this.numb > 1 && Boolean(this.haveSkuBean)) {\r\n                    this.numb--;\r\n                } else {\r\n                    if (!this.haveSkuBean) {\r\n                        uni.showToast({\r\n                            title: this.language.skus.chooseTips,\r\n                            duration: 1000,\r\n                            icon: 'none'\r\n                        });\r\n                    } else {\r\n                        this.numb == 1;\r\n                        uni.showToast({\r\n                            title: this.language.skus.minNum,\r\n                            duration: 1000,\r\n                            icon: 'none'\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            \r\n            /*\r\n                 ——————sku核心算法 开始——————\r\n             */\r\n             powerset(arr) {\r\n                 let ps = [[]];\r\n                 for (let i = 0; i < arr.length; i++) {\r\n                     for (let j = 0, len = ps.length; j < len; j++) {\r\n                         ps.push(ps[j].concat(arr[i]));\r\n                     }\r\n                 }\r\n            \r\n                 return ps;\r\n             },\r\n            \r\n             /**\r\n              * 初始化数据\r\n              * @return\r\n              */\r\n             initData(isCart) {\r\n                 this.haveSkuBean = ''\r\n                 this.numb = 1;\r\n                 \r\n                 this.result = {};\r\n                 this.keys = this.getAllKeys(); //arrKeys[\"颜色\", \"尺码\", \"型号\"]\r\n            \r\n                 for (let i = 0; i < this.keys.length; i++) {\r\n                     this.highKeys[this.keys[i]] = false; //所有的都为false\r\n                 }\r\n            \r\n                 this.sku_list = this.combineAttr(this.skuBeanList, this.keys);\r\n            \r\n                 // this.initSeleted(this.SkuID);\r\n                 // this.initSeleted(this.Pic);\r\n                 // this.initSeleted(this.Price);\r\n                 // this.initSeleted(this.Stock);\r\n                 this.buildResult(this.sku_list.items);\r\n                 this.updateStatus(this.getSelectedItem(), true);\r\n                 \r\n                 \r\n                 // 初始筛选出库存为0的属性\r\n                 let filterObj = {}\r\n                 for(let i in this.result){\r\n                     if((!i.includes(',')) && this.result[i].skus.Stock == 0){\r\n                         filterObj[i] = this.result[i]\r\n                     }\r\n                 }\r\n                 \r\n                 for(let i in this.sku_list.result){\r\n                     \r\n                     for(let k in this.sku_list.result[i]){\r\n                         \r\n                         for(let j in filterObj){\r\n                             if(k == j){\r\n                                 this.sku_list.result[i][k].disabled = true\r\n                             }\r\n                         }\r\n                         \r\n                     }\r\n                     \r\n                 }\r\n                 // 筛选结束\r\n                 \r\n                 if((!this.sku_list.result['undefined']) && this.haveSkuBean == '' && !isCart){\r\n                     let price = 0;\r\n                     let sku = ''\r\n                     for(let i = 0;i<this.sku_list.items.length;i++){\r\n                         let stock = Number(this.sku_list.items[i].Stock)\r\n                         \r\n                         if(stock>0 && price == 0){\r\n                            price = Number(this.sku_list.items[i].price)\r\n                            sku = this.sku_list.items[i]\r\n                         }else if(stock>0 && price>Number(this.sku_list.items[i].price)){\r\n                            price = Number(this.sku_list.items[i].price)\r\n                            sku = this.sku_list.items[i]\r\n                         }\r\n                         \r\n                     }\r\n                     \r\n                     if(sku != ''){\r\n                         this.initSeleted(sku.sku);\r\n                     }\r\n                     \r\n                 }\r\n                 \r\n                 this.showResult();\r\n             },\r\n            \r\n             /**\r\n              * 正常属性点击\r\n              */\r\n             handleNormalClick(key, value) {\r\n                 let list = JSON.parse(JSON.stringify(this.sku_list));\r\n             \r\n                 for (let i in list.result[key]) {\r\n                     if (i != value.name) {\r\n                         list.result[key][i].active = false;\r\n                     } else {\r\n                         list.result[key][i].active = true;\r\n                     }\r\n                 }\r\n            \r\n                 this.sku_list = list;\r\n             },\r\n            \r\n             /**\r\n              * 无效属性点击\r\n              */\r\n             handleDisableClick(key, value) {\r\n                 this.sku_list.result[key][value.name]['disabled'] = false;\r\n                 // 清空高亮行的已选属性状态（因为更新的时候默认会跳过已选状态）\r\n                 for (let i in this.sku_list.result) {\r\n                     if (i != key) {\r\n                         for (let x in this.sku_list.result[i]) {\r\n                             this.sku_list.result[i][x].active = false;\r\n                         }\r\n                     }\r\n                 }\r\n            \r\n                 this.updateStatus(this.getSelectedItem());\r\n             },\r\n            \r\n             /**\r\n              * 高亮行\r\n              */\r\n             highAttributes: function() {\r\n                 for (let key in this.sku_list.result) {\r\n                     this.highKeys[key] = true;\r\n                     for (let attr in this.sku_list.result[key]) {\r\n                         if (this.sku_list.result[key][attr].active === true) {\r\n                             this.highKeys[key] = false;\r\n                             break;\r\n                         }\r\n                     }\r\n                 }\r\n             },\r\n            \r\n             /**\r\n              * 点击事件处理\r\n              * @param  key   点击的行\r\n              * @param  value 点击的按钮的数据\r\n              */\r\n             handleActive: function(key, value) {\r\n                 if(value.disabled === true){\r\n                     uni.showToast({\r\n                         title: this.language.skus.stockTips,\r\n                         icon: 'none'\r\n                     })\r\n                     return\r\n                 }\r\n                 \r\n                 if (value.active == true) {\r\n                     return false;\r\n                 }\r\n            \r\n                 this.handleNormalClick(key, value);\r\n                 if (value.disabled === true) {\r\n                     this.handleDisableClick(key, value);\r\n                 }\r\n            \r\n                 setTimeout(()=>{\r\n                     this.updateStatus(this.getSelectedItem());\r\n                     this.highAttributes();\r\n                     this.showResult();\r\n                 },0)\r\n             },\r\n            \r\n             /**\r\n              * 计算属性\r\n              * @param  {[type]} data [description]\r\n              * @param  {[type]} keys [description]\r\n              * @return {[type]}      [description]\r\n              */\r\n             combineAttr(data, keys) {\r\n                 let allKeys = [];\r\n                 let result = {};\r\n            \r\n                 for (let i = 0; i < data.length; i++) {\r\n                     let item = data[i];\r\n                     let values = [];\r\n            \r\n                     for (let j = 0; j < keys.length; j++) {\r\n                         let key = keys[j];\r\n                         if (!result[key]) {\r\n                             result[key] = {};\r\n                         }\r\n            \r\n                         if (!result[key][item[key]]) {\r\n                             result[key][item[key]] = { name: item[key], active: false, disabled: item['Stock'] > 0 ? false : true };\r\n                         }\r\n            \r\n                         values.push(item[key]);\r\n                     }\r\n            \r\n                     allKeys.push({\r\n                         path: values.join(this.spliter),\r\n                         sku: item['SkuID'],\r\n                         price: item['Price'],\r\n                         Pic: item['Pic'],\r\n                         Stock: item['Stock']\r\n                     });\r\n                 }\r\n            \r\n                 return {\r\n                     result: result,\r\n                     items: allKeys\r\n                 };\r\n             },\r\n            /* \r\n                判断是否是JSON字符串\r\n            */\r\n             isJSON(str) {\r\n                 if (typeof str == 'string') {\r\n                     try {\r\n                         var obj = JSON.parse(str);\r\n                         return true;\r\n                     } catch (e) {\r\n                       \r\n                         return false;\r\n                     }\r\n                 }\r\n             },\r\n            \r\n             /**\r\n              * 获取所有属性\r\n              * @return {[type]} [description]\r\n              */\r\n             getAllKeys() {\r\n                 let arrKeys = [];\r\n                 for (let attribute in this.skuBeanList[0]) {\r\n                     if (!this.skuBeanList[0].hasOwnProperty(attribute)) {\r\n                         continue;\r\n                     }\r\n            \r\n                     if (attribute !== this.skuName && attribute !== this.skuName1 && attribute !== this.skuName2 && attribute !== this.skuName3) {\r\n                         arrKeys.push(attribute);\r\n                     }\r\n                 }\r\n                 \r\n                 if(arrKeys.length == 0){\r\n                 \tarrKeys = [\"undefined\"]\r\n                 \tthis.skuBeanList[0][\"undefined\"] = \"undefined\"\r\n                 }\r\n                 \r\n                 return arrKeys;\r\n             },\r\n            \r\n             getAttruites(arr) {\r\n                 let result = [];\r\n                 for (let i = 0; i < arr.length; i++) {\r\n                     result.push(arr[i].path);\r\n                 }\r\n            \r\n                 return result;\r\n             },\r\n            \r\n             /**\r\n              * 生成所有子集是否可选、库存状态 map\r\n              */\r\n             buildResult(items) {\r\n                 let allKeys = this.getAttruites(items);\r\n            \r\n                 let attr = {};\r\n                 //价格 , 库存, 图片 赋值\r\n                 for (let i = 0; i < allKeys.length; i++) {\r\n                     let curr = allKeys[i];\r\n                     let sku = items[i].sku;\r\n                     let Pic = items[i].Pic;\r\n                     let price = items[i].price;\r\n                     let Stock = items[i].Stock;\r\n                     let values = curr.split(this.spliter);\r\n                     let allSets = this.powerset(values);\r\n            \r\n                     // 每个组合的子集\r\n                     for (let j = 0; j < allSets.length; j++) {\r\n                         let set = allSets[j];\r\n                         let key = set.join(this.spliter);\r\n                         if (key && !this.result[key]) {\r\n                             this.result[key] = {\r\n                                 skus: { sku, Pic, price, Stock }\r\n                             };\r\n            \r\n                             if ((!key.includes(',') && !attr[key]) || (key.includes(',') && key.split(',').length < allKeys[i].split(',').length)) {\r\n                                 attr[key] = {\r\n                                     skus: { sku, Pic, price, Stock }\r\n                                 };\r\n                             }\r\n                         }\r\n                     }\r\n                 }\r\n            \r\n                 for (let i in attr) {\r\n                     attr[i].skus.Stock = 0;\r\n                     for (let k in this.result) {\r\n                         if (i != k && k.split(',').length == allKeys[0].split(',').length && k.includes(i)) {\r\n                             attr[i].skus.Stock += Number(this.result[k].skus.Stock);\r\n                         } else if (k.split(',').length == allKeys[0].split(',').length) {\r\n                             let flag = [];\r\n            \r\n                             k.split(',').filter(item => {\r\n                                 i.split(',').filter(it => {\r\n                                     if (item == it) {\r\n                                         flag.push(true);\r\n                                     }\r\n                                 });\r\n                             });\r\n            \r\n                             if (flag.length == i.split(',').length) {\r\n                                 attr[i].skus.Stock += Number(this.result[k].skus.Stock);\r\n                             }\r\n                         }\r\n                     }\r\n                 }\r\n            \r\n                 Object.assign(this.result, attr);\r\n             },\r\n            \r\n             /**\r\n              * 获取选中的信息\r\n              * @return Array\r\n              */\r\n             getSelectedItem() {\r\n                 let result = [];\r\n                 for (let attr in this.sku_list.result) {\r\n                     let attributeName = '';\r\n                     for (let attribute in this.sku_list.result[attr]) {\r\n                         if (this.sku_list.result[attr][attribute].active === true) {\r\n                             attributeName = attribute;\r\n                         }\r\n                     }\r\n            \r\n                     result.push(attributeName);\r\n                 }\r\n            \r\n                 return result;\r\n             },\r\n            \r\n             /**\r\n              * 更新所有属性状态\r\n              */\r\n             updateStatus(selected, type) {\r\n                 for (let i = 0; i < this.keys.length; i++) {\r\n                     let key = this.keys[i],\r\n                         data = this.sku_list.result[key],\r\n                         hasActive = !!selected[i],\r\n                         copy = selected.slice();\r\n            \r\n                     for (let j in data) {\r\n                         let item = data[j]['name'];\r\n                         if (selected[i] == item) {\r\n                             continue;\r\n                         }\r\n            \r\n                         copy[i] = item;\r\n                         let curr = this.trimSpliter(copy.join(this.spliter), this.spliter);\r\n            \r\n                         if (type) {\r\n                             this.sku_list.result[key][j]['disabled'] = this.result[curr] ? false : true;\r\n                         } else {\r\n                             this.sku_list.result[key][j]['disabled'] = this.result[curr].skus.Stock > 0 ? false : true;\r\n                         }\r\n                     }\r\n                 }\r\n             },\r\n            \r\n             trimSpliter(str, spliter) {\r\n                 let reLeft = new RegExp('^' + spliter + '+', 'g');\r\n                 let reRight = new RegExp(spliter + '+$', 'g');\r\n                 let reSpliter = new RegExp(spliter + '+', 'g');\r\n                 return str\r\n                     .replace(reLeft, '')\r\n                     .replace(reRight, '')\r\n                     .replace(reSpliter, spliter);\r\n             },\r\n            \r\n             /**\r\n              * 初始化选中\r\n              * @param  mixed|Int|String SkuID 需要选中的SkuID\r\n              * @return {[type]}       [description]\r\n              */\r\n             initSeleted(a) {\r\n                 for (let i in this.skuBeanList) {\r\n                     if (this.skuBeanList[i][this.skuName] == a) {\r\n                         for (let x in this.skuBeanList[i]) {\r\n                             if (x !== this.skuName && x !== this.skuName1 && x !== this.skuName2 && x !== this.skuName3) {\r\n                                 this.sku_list.result[x][this.skuBeanList[i][x]].active = true;\r\n                             }\r\n                         }\r\n                         break;\r\n                     }\r\n                 }\r\n             },\r\n            \r\n             /**\r\n              * 显示选中的信息\r\n              * @return\r\n              */\r\n             showResult() {\r\n                 let result = this.getSelectedItem();\r\n                 let s = [];\r\n                 for (let i = 0; i < result.length; i++) {\r\n                     let item = result[i];\r\n                     if (!!item) {\r\n                         s.push(item);\r\n                     }\r\n                 }\r\n                 \r\n                 if (s.length > 0) {\r\n                     this.num = this.result[s.join(this.spliter)].skus.Stock;\r\n                 }\r\n                 \r\n                 if (s.length == this.keys.length) {\r\n                     let curr = this.result[s.join(this.spliter)];\r\n                     if (curr) {\r\n                         this.SkuID = curr.skus.sku;\r\n                         this.Pic = curr.skus.Pic;\r\n                         this.price = curr.skus.price;\r\n                         \r\n                         this.skuBeanList.filter(item=>{\r\n                             if(item.SkuID == this.SkuID){\r\n                                 this.Stock = item.Stock;\r\n                                 this.num = item.Stock;\r\n                                 this.imgurl = item.Pic\r\n                             }\r\n                         })\r\n                         \r\n                         if(Number(this.numb)>Number(this.Stock)){\r\n                         \tthis.numb = Number(this.Stock)\r\n                         }\r\n                     }\r\n            \r\n                     this.haveSkuBean = {\r\n                         name: s.join(this.spliter),\r\n                         cid: curr.skus.sku,\r\n                         skus: curr.skus\r\n                     };\r\n                 } else {\r\n                     this.haveSkuBean = '';\r\n                 }\r\n                 \r\n             },\r\n            \r\n             /* \r\n                 ——————sku核心算法 结束——————\r\n            */\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    /* 遮罩层规格样式 */\r\n    .mask {\r\n        height: 100vh;\r\n        width: 100%;\r\n        background-color: rgba(000, 000, 000, 0.5);\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 999 !important;\r\n    }\r\n    \r\n    .mask_d {\r\n        z-index: 999;\r\n    }\r\n    \r\n    .mask_two li {\r\n        float: left;\r\n        width: auto;\r\n        min-width: 60rpx;\r\n        border: 1px solid #FF612A;\r\n        margin: 24rpx 20rpx 0 0;\r\n        padding: 0 10rpx;\r\n    }\r\n    \r\n    .numb ._img {\r\n        padding: 0px;\r\n    }\r\n    \r\n    .goods_mun {\r\n        color: #9D9D9D;\r\n        padding: 0rpx;\r\n        display: inline-block;\r\n        width: auto;\r\n        background-color: #F8F8F8;\r\n        box-sizing: border-box;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n    }\r\n    \r\n    .goods_mun {\r\n        display: flex;\r\n        align-items: center;\r\n        border: 1px solid #DDDDDD;\r\n        border-radius: 8rpx;\r\n        height: 46rpx;\r\n        width: 170rpx;\r\n    }\r\n    \r\n    .goods_mun span {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n    \r\n    .goods_mun span img {\r\n        width: 16rpx;\r\n        height: 16rpx;\r\n        padding: 10rpx;\r\n        /* #ifdef MP-ALIPAY */\r\n        background-size: 25rpx 25rpx !important;\r\n        width: 0.1rem;\r\n        height: 0.07rem;\r\n        /* #endif */\r\n    \r\n    }\r\n    \r\n    .cha {\r\n        width: 24rpx;\r\n        height: 24rpx;\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        padding: 10rpx;\r\n        background-size: 50% 50% !important;\r\n    }\r\n    \r\n    .back {\r\n        background-color: #fff;\r\n        color: #DDDDDD;\r\n        border: 1px solid #eee;\r\n        height: 52rpx;\r\n    }\r\n    \r\n    .orange {\r\n        background-color: #FFFFFF;\r\n        color: #020202;\r\n        height: 52rpx;\r\n        // border: 2rpx solid @btnBackground !important;\r\n\t\tborder: 2rpx solid #FF612A;\r\n        border-radius: 8rpx;\r\n        // color: @btnBackground !important;\r\n\t\tcolor: #FF612A;\r\n    }\r\n    \r\n    .orange div,.select div,.back div {\r\n        margin: 0px 30rpx;\r\n    }\r\n    \r\n    .select {\r\n        color: #666666;\r\n        height: 56rpx;\r\n        border: 0rpx solid rgba(2, 2, 2, 1) !important;\r\n        background: rgba(248, 248, 248, 1);\r\n        border-radius: 8rpx;\r\n    }\r\n    \r\n    .goods_spec li {\r\n        padding: 30rpx;\r\n        color: #020202;\r\n        font-size: 24rpx;\r\n        padding-left: 170rpx;\r\n        position: relative;\r\n        border-bottom: 1px solid #eee;\r\n        overflow: hidden;\r\n        justify-content: flex-start;\r\n    }\r\n    \r\n    .goods_spec li > span {\r\n        font-size: 28rpx;\r\n        color: #888;\r\n    }\r\n    \r\n    .goods_spec li .g_div {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 30rpx;\r\n        width: 160rpx;\r\n        height: 100%;\r\n        text-align: center;\r\n        display: flex;\r\n    }\r\n    \r\n    .goods_spec li .g_div div {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    \r\n    .goods_spec li > p {\r\n        width: 80%;\r\n        overflow: hidden;\r\n        height: 40rpx;\r\n        line-height: 40rpx;\r\n    }\r\n    \r\n    .active {\r\n        color: #9D9D9D !important;\r\n        font-size: 26rpx !important;\r\n    }\r\n    \r\n    .load {\r\n        height: 750rpx;\r\n        width: 100%;\r\n        background-color: #9D9D9D;\r\n        opacity: 0.7;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        text-align: center;\r\n    }\r\n    \r\n    .load > p {\r\n        font-size: 20rpx;\r\n        color: #eee;\r\n        margin-top: 1rpx;\r\n    }\r\n    \r\n    .mask_num {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n    }\r\n    \r\n    .goods_mun {\r\n        color: #9D9D9D;\r\n        padding: 0rpx;\r\n        display: inline-block;\r\n        width: auto;\r\n        background-color: #F8F8F8;\r\n        box-sizing: border-box;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n    }\r\n    \r\n    .goods_mun {\r\n        display: flex;\r\n        align-items: center;\r\n        border: 1px solid #DDDDDD;\r\n        border-radius: 8rpx;\r\n        height: 46rpx;\r\n        width: 170rpx;\r\n    }\r\n    \r\n    .goods_mun span {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n    \r\n    .goods_mun span img {\r\n        width: 16rpx;\r\n        height: 16rpx;\r\n        padding: 10rpx;\r\n        /* #ifdef MP-ALIPAY */\r\n        background-size: 25rpx 25rpx !important;\r\n        width: 0.1rem;\r\n        height: 0.07rem;\r\n        /* #endif */\r\n    \r\n    }\r\n    \r\n    .goods_mun_span {\r\n        border-right: 1px solid #ddd;\r\n    }\r\n    \r\n    .goods_mun_add {\r\n        border-left: 1px solid #ddd;\r\n    }\r\n    \r\n    .mask_pric_num {\r\n        font-size: 24rpx;\r\n        color: #999999;\r\n    }\r\n    .mun {\r\n        margin: 0 10rpx;\r\n        font-size: 30rpx;\r\n        border: none !important;\r\n        color: #020202\r\n    }\r\n    \r\n    .goodAnimate {\r\n        animation: myGood 0.5s 1;\r\n        animation-timing-function: ease;\r\n        animation-fill-mode: forwards;\r\n    }\r\n    \r\n    @keyframes myGood {\r\n        from {\r\n            bottom: -1300rpx;\r\n        }\r\n    \r\n        to {\r\n            bottom: 000rpx;\r\n        }\r\n    }\r\n    \r\n    .goodAnimate1 {\r\n        animation: myGood1 0.5s 1;\r\n        animation-timing-function: ease;\r\n        animation-fill-mode: forwards;\r\n    }\r\n    \r\n    @keyframes myGood1 {\r\n        from {\r\n            bottom: 0rpx;\r\n        }\r\n    \r\n        to {\r\n            bottom: -1300rpx;\r\n        }\r\n    }\r\n    .mask_price {\r\n        font-size: 24rpx;\r\n        color: @priceColor;\r\n        .font_30 {\r\n            font-size: 30rpx;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./skus.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./skus.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1609849154548\n      var cssReload = require(\"F:/BaiduNetdiskDownload/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
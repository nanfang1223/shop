(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-myWallet-recharge"],{"04b8":function(e,a,t){"use strict";var i=t("4ea4");t("99af"),t("a9e3"),t("b680"),t("d3b7"),t("ac1f"),t("1276"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("96cf");var n=i(t("1da1")),o=i(t("059a")),s={data:function(){return{open_alipay:!1,open_wxpay:!1,title:"充值",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/2.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",pay_zhifub:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",pay_weix:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",pay:[{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"},{img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"}],pay_index:-1,pay_style:"",price:"",enterPay:!1,fastTap:!0,pay_provider:"",aliPayStatue:!1,wxPayStatue:!1,order_list:"",code:"",firstFlag:!0,value_inp:"",min_amount:"",rechargeTitle:"",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",payment:{}}},mounted:function(){var e=this;this.isLogin((function(){e._pay(1),e._pay(1),e._axios()}))},onShow:function(){var e=window.location.href;if(e.split("?").length>1){var a=e.split("?")[1],t=a.split("&");for(var i in t)"String"!=typeof t[i]&&"string"!=typeof t[i]||"code"==t[i].substring(0,4)&&(a=t[i].substring(5),this.code=a)}""==this.code&&this.toUrl()},watch:{price:function(e,a){var t=this;this.$nextTick((function(){if(e>.01)if(0==Math.abs(e-a)){t.enterPay=!0;var i=Number(e);isNaN(i)?t.price="0":t.price=i}else if(Math.abs(e-a)<.01){t.enterPay=!0;var n=Number(e).toFixed(2);isNaN(n)?t.price="0":t.price=n}else{t.enterPay=!0;var o=Number(e);isNaN(o)?t.price="0":t.price=o}else t.enterPay=!1}))}},methods:{isPayShow:function(){1==this.payment.jsapi_wechat&&(this.open_wxpay=!0)},changeLoginStatus:function(){this._axios()},_back:function(){uni.navigateBack({delta:1})},_axios:function(){var e=this,a={module:"app",action:"recharge",app:"index"};this.$req.post({data:a}).then((function(a){200==a.code&&(e.min_amount=a.min_cz,e.payment=a.payment,e.rechargeTitle=e.language.recharge.money_placeholder+" "+e.min_amount,e.isPayShow())}))},_money:function(e){this.price=Number(e.detail.value);var a=Number(this.min_amount);this.price<a&&(this.price="",uni.showToast({title:"".concat(this.language.recharge.toasts[0]," ").concat(a," ").concat(this.language.recharge.toasts[1]),duration:1500,icon:"none"})),this.fastTap=!0},toUrl:function(){var e=this,a=window.location.href,t=(uni.getStorageSync("access_id"),{type:"jsapi_wechat",app:"get_config",module:"app",action:"order",url:a});this.$req.post({data:t}).then((function(a){if(200==a.code){var t=a.data.config.appid;e.myappid=t;var i=a.data.url,n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=n}else uni.showToast({title:a.message,duration:1500,icon:"none"})}))},_checkValue:function(e){this.price=Number(e.detail.value);var a=Number(this.min_amount);this.price<a?this.fastTap=!1:this.fastTap=!0},pay1:function(){var e=this.LaiKeTuiCommon.ttIOSCantVisualpay();if(e&&this.fastTap){if(this.fastTap=!1,this.firstFlag=!1,""==this.price)return uni.showToast({title:this.language.recharge.toasts[2],duration:1e3,icon:"none"}),this.fastTap=!0,void(this.firstFlag=!0);uni.showLoading({title:this.language.showLoading.axiospaying,mask:!0}),this.pay_wx()}},baidu_pay:function(){},tt_pay:function(){},getOrderInfo:function(e){if(!e)return uni.showToast({title:this.language.recharge.toasts[3],duration:1e3,icon:"none"}),void(this.firstFlag=!0);(new Date).getTime();var a={access_id:this.access_id,order_list:this.order_list,sNo:this.getCZNo(),title:"充值",module:"app",action:"pay",type:e,total:this.price};uni.hideLoading(),a.code=this.code;var t=this.LaiKeTuiCommon.getMPAliAuthCode();return t.then((function(e){return new Promise((function(e,t){uni.request({url:uni.getStorageSync("url"),data:a,success:function(a){200==a.statusCode&&e(a)},fail:function(e){}})}))}))},getCZNo:function(){var e=(new Date).getTime();return"CZ"+e+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())},alipay_minipay:function(){},rechargeSuccess:function(e){var a=this;setTimeout((function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&money="+a.price+"&_type="+e})}),1e3)},weixinPay:function(){var e=this,a=this;this.loading=!0,uni.login({provider:"weixin",success:function(t){var i="mini_wechat",n={code:t.code,access_id:a.access_id,sNo:a.getCZNo(),title:"充值",module:"app",action:"pay",type:i,total:a.price};uni.request({url:uni.getStorageSync("url"),data:n,success:function(e){if(200!==e.statusCode)uni.showModal({title:a.language.recharge.hint,content:a.language.recharge.modalTips[0],confirmText:a.language.showModal.confirm,cancelText:a.language.showModal.cancel,success:function(e){a.fastTap=!0}});else if(200==e.statusCode){var t=e.data;uni.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign,success:function(e){uni.showToast({title:a.language.recharge.toasts[5],duration:1e3,icon:"none"}),setTimeout((function(){uni.redirectTo({url:"rechargeSuccess?mylei=1&type=wx&_type=wx&money="+a.price})}),1e3),uni.hideLoading()},fail:function(e){uni.showModal({title:a.language.recharge.hint,content:a.language.recharge.modalTips[0],confirmText:a.language.showModal.confirm,cancelText:a.language.showModal.cancel,success:function(e){a.fastTap=!0}}),uni.hideLoading()}})}else uni.showModal({title:a.language.recharge.hint,content:a.language.recharge.modalTips[0],confirmText:a.language.showModal.confirm,cancelText:a.language.showModal.cancel,success:function(e){a.fastTap=!0}}),uni.hideLoading()},fail:function(t){e.loading=!1,uni.showModal({title:a.language.recharge.hint,content:a.language.recharge.modalTips[0],confirmText:a.language.showModal.confirm,cancelText:a.language.showModal.cancel,success:function(e){a.fastTap=!0}}),uni.hideLoading()}})},fail:function(t){e.loading=!1,uni.showModal({title:a.language.recharge.hint,content:a.language.recharge.modalTips[0],confirmText:a.language.showModal.confirm,cancelText:a.language.showModal.cancel,success:function(e){a.fastTap=!0}}),uni.hideLoading()}})},_payFail:function(){var e=this;uni.showModal({title:this.language.recharge.hint,content:this.language.recharge.modalTips[1],confirmText:this.language.showModal.confirm,cancelText:this.language.showModal.cancel,success:function(a){e.firstFlag=!0;var t=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet";a.cancel&&(t=uni.getStorageSync("h5_url")+"pages/tabBar/home"),setTimeout((function(){window.location.href=t}),1e3)}})},pay_wx:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var t,i,n,o,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,i="app_wechat",1,"","alipay"==t.pay_provider?("alipay",i="alipay"):("wxpay",i="jsapi_wechat",2),a.next=7,t.getOrderInfo(i);case 7:n=a.sent,200!==n.statusCode&&t._payFail(),uni.hideLoading(),"alipay"==i?(o=uni.getStorageSync("endurl")+"order/"+t.sNo+"_alipay.html",window.location.href=o):"jsapi_wechat"==i&&(s=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:r.appid,timeStamp:r.timeStamp,nonceStr:r.nonceStr,package:r.package,signType:r.signType,paySign:r.paySign},(function(e){t.firstFlag=!0,t.code;var a=window.location.href,i=a.split("#")[0];i.concat("#/pages/pay/payResult");if("get_brand_wcpay_request:ok"==e.err_msg){t.$store.state.payRes=t.order_list;t.price1,t.sNo;window.location.href=uni.getStorageSync("h5_url")+"pagesB/myWallet/myWallet"}else t._payFail()}))},r=n.data,"undefined"!=typeof WeixinJSBridge?s(r):"undefined"==typeof WeixinJSBridge&&(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",s,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",s),document.attachEvent("onWeixinJSBridgeReady",s))));case 11:case"end":return a.stop()}}),a)})))()},_pay:function(e){this.pay_index=e,this.pay_style=e+1,0==e?this.pay_provider="alipay":1==e?this.pay_provider="app_wechat":2==e&&(this.pay_provider="baidu_pay")}},components:{heads:o.default}};a.default=s},"14df":function(e,a,t){"use strict";t.r(a);var i=t("6c6e"),n=t("4181");for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);t("907aa");var s,r=t("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"4e333f68",null,!1,i["a"],s);a["default"]=c.exports},4181:function(e,a,t){"use strict";t.r(a);var i=t("04b8"),n=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(a,e,(function(){return i[e]}))}(o);a["default"]=n.a},6445:function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,".box[data-v-4e333f68]{background-color:#f4f4f4;height:100vh}.recharge_ts[data-v-4e333f68]{margin:0 %?30?%;font-size:%?22?%;color:#9d9d9d;position:relative;padding:%?19?% 0}.recharge_money[data-v-4e333f68]{background-color:#fff;padding:%?30?%;font-size:%?28?%;color:#020202;position:relative;margin-bottom:%?20?%}.recharge_money[data-v-4e333f68],\n.recharge_ts[data-v-4e333f68]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.recharge_money uni-input[data-v-4e333f68]{border:none;margin-left:%?38?%}.setup-buttom[data-v-4e333f68]{width:%?690?%;height:%?90?%;line-height:%?90?%;-webkit-border-radius:%?8?%;border-radius:%?8?%}.setup-buttom[data-v-4e333f68]{height:%?90?%;width:%?690?%;margin:0 auto;position:relative;margin-top:%?70?%}.head[data-v-4e333f68],\n.order_header[data-v-4e333f68]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.head[data-v-4e333f68]{height:%?88?%;padding:0 %?30?%;border-bottom:1px solid #eee;font-size:%?40?%;color:#242424}.head_img[data-v-4e333f68]{width:%?24?%;height:%?36?%}.head_search[data-v-4e333f68]{width:%?40?%;height:%?40?%;visibility:hidden}.order_header[data-v-4e333f68]{-webkit-justify-content:space-around;justify-content:space-around;width:100%;border-bottom:1px solid #d2d2d2}.recharge_money .span[data-v-4e333f68]{min-width:25%}.choose_ul[data-v-4e333f68]{background-color:#fff;position:relative}.choose_ul > li[data-v-4e333f68]:first-child{font-size:%?28?%}.pay_div[data-v-4e333f68]{position:relative;width:50%}.pay_div > p[data-v-4e333f68]{position:absolute;top:%?6?%;left:%?64?%}\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 皮肤公共颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 订单模块颜色值 */\n/* 背景颜色 */\n/*  背景渐变色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */",""]),e.exports=a},"6c6e":function(e,a,t){"use strict";var i;t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return i}));var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"box"},[t("lktauthorize",{ref:"lktAuthorizeComp",on:{pChangeLoginStatus:function(a){arguments[0]=a=e.$handleEvent(a),e.changeLoginStatus.apply(void 0,arguments)}}}),t("heads",{attrs:{title:e.language.recharge.title}}),t("div",{staticClass:"recharge_ts"},[e._v(e._s(e.language.recharge.prompt))]),t("div",{staticClass:"recharge_money"},[t("span",{staticClass:"span"},[e._v(e._s(e.language.recharge.money))]),t("v-uni-input",{attrs:{"placeholder-style":"color: #b8b8b8;",type:"digit",min:"0.01",maxlength:"9",value:e.price,placeholder:e.rechargeTitle},on:{blur:function(a){arguments[0]=a=e.$handleEvent(a),e._money.apply(void 0,arguments)},input:function(a){arguments[0]=a=e.$handleEvent(a),e._checkValue.apply(void 0,arguments)}}})],1),t("ul",{staticClass:"choose_ul"},[t("li",{staticClass:"pay"},[e._v(e._s(e.language.recharge.paymentStyle))]),1==e.open_wxpay?t("li",{staticClass:"pay",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e._pay(1)}}},[t("div",{staticClass:"pay_div"},[t("img",{staticClass:"pay_img",attrs:{src:e.pay[1].img}}),t("p",[e._v(e._s(e.language.recharge.weChat))])]),t("img",{staticClass:"quan_img",attrs:{src:e.quan_hei}})]):e._e()]),t("div",{staticClass:"setup-buttom",staticStyle:{background:"#FF612A"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.pay1()}}},[e._v(e._s(e.language.recharge.btn))])],1)},o=[]},"907aa":function(e,a,t){"use strict";var i=t("b172"),n=t.n(i);n.a},b172:function(e,a,t){var i=t("6445");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("4f06").default;n("255f5b4c",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
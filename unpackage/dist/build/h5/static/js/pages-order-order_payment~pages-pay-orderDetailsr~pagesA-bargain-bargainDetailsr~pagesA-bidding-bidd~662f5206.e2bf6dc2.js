(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-order_payment~pages-pay-orderDetailsr~pagesA-bargain-bargainDetailsr~pagesA-bidding-bidd~662f5206"],{"0656":function(e,t,a){"use strict";var i=a("4ea4");a("d3b7"),a("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;for(var n=i(a("b85c")),r=[],s=0;s<6;s++)r.push({text:"",pass:""});var o={props:["value"],data:function(){return{numlist:[{text:1,isNumber:!0},{text:2,isNumber:!0},{text:3,isNumber:!0},{text:4,isNumber:!0},{text:5,isNumber:!0},{text:6,isNumber:!0},{text:7,isNumber:!0},{text:8,isNumber:!0},{text:9,isNumber:!0},{text:"",isNumber:!1},{text:0,isNumber:!0},{text:"删除",isNumber:!1,isDelete:!0}],password:r,conu:6,num:0,qiandaoguanbiimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/guanbi2x.png",show:!1}},watch:{value:function(e){this.show=e},show:function(e){this.$emit("input",e)}},created:function(){this.numlist[11].text=this.language.paymodel.del,this.setLang()},methods:{enterPassword:function(e){if(""!==e&&!(this.num>=this.conu)&&(this.password[this.num].text="●",this.password[this.num].pass=e,this.num++,this.num===this.conu)){var t,a="",i=(0,n.default)(this.password);try{for(i.s();!(t=i.n()).done;){var r=t.value;a+=r.pass.toString()}}catch(s){i.e(s)}finally{i.f()}this.success(a)}},deletePassword:function(){0!=this.num&&(this.password[this.num-1].text="",this.password[this.num-1].pass="",this.num--)},cancel:function(){this.restorePassword(),this.$emit("cancel")},restorePassword:function(){this.show=!this.show;var e,t=(0,n.default)(this.password);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.text="",a.pass=""}}catch(i){t.e(i)}finally{t.f()}this.num=0},success:function(e){this.$emit("success",e),this.restorePassword()},forgetPW:function(){uni.navigateTo({url:"../../pagesB/setUp/paymentPassword"})}}};t.default=o},"06c5":function(e,t,a){"use strict";a("a630"),a("fb6a"),a("d3b7"),a("25f0"),a("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(a("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(e){if("string"===typeof e)return(0,i.default)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,i.default)(e,t):void 0}}},1114:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("v-uni-view",{staticClass:"payModel"},[a("v-uni-view",{staticClass:"payModel-msg",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"payModel-card",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)}}},[a("v-uni-view",{staticClass:"payModel-card-head"},[a("v-uni-text",[e._v(e._s(e.language.paymodel.iptPassword))]),a("v-uni-image",{attrs:{src:e.qiandaoguanbiimg},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"payModel-card-body"},[a("v-uni-view",{}),a("v-uni-view",{staticClass:"code"},[e._l(e.password,(function(t,i){return[a("v-uni-view",{key:i,staticClass:"code-item"},[i<e.num?[e._v("●")]:e._e()],2)]}))],2),a("v-uni-view",{staticClass:"forget"},[a("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.forgetPW.apply(void 0,arguments)}}},[e._v(e._s(e.language.paymodel.forgot))])],1)],1),a("v-uni-view",{staticClass:"payModel-card-keyboard"},[a("v-uni-view",{staticClass:"keyboard"},[e._l(e.numlist,(function(t,i){return[t.isDelete?a("v-uni-view",{staticStyle:{background:"#EAE9E8"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deletePassword.apply(void 0,arguments)}}},[e._v(e._s(e.language.paymodel.del))]):a("v-uni-view",{key:i,class:{grey:!t.isNumber},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.enterPassword(t.text)}}},[e._v(e._s(t.text))])]}))],2)],1)],1)],1):e._e()},r=[]},"3a99":function(e,t,a){"use strict";a.r(t);var i=a("1114"),n=a("e174");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("e9b5");var s,o=a("f0c5"),d=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"69535f96",null,!1,i["a"],s);t["default"]=d.exports},5582:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530")),r={data:function(){return{seckill:!1,sec_id:0,time_id:0,platform_activities_id:0,activity_id:0}},methods:{getSeckillPayOrderInfo:function(){return{module:"app",action:"order",app:"payment",cart_id:this.cart_id,address_id:this.address_id,type:"MS",coupon_id:this.coupon_id,remarks:this.remarks,activity_id:this.activity_id,time_id:this.time_id,platform_activities_id:this.platform_activities_id,sec_id:this.sec_id}},getSeckillWalletPayData:function(e){return(0,n.default)((0,n.default)({},e),{},{activity_id:this.activity_id,time_id:this.time_id,payment_money:this.total})}}};t.default=r},6915:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530")),r={data:function(){return{bargain:!1,bargain_id:"",order_no:""}},methods:{getBargainPayOrderInfo:function(){return{module:"app",action:"order",app:"payment",cart_id:this.cart_id,address_id:this.address_id,type:"KJ",coupon_id:this.coupon_id,bargain_id:this.bargain_id,bargain_order_no:this.order_no,remarks:this.remarks}},getBargainWalletPayData:function(e){return(0,n.default)((0,n.default)({},e),{},{order_no:this.order_no,type_:"KJ"})}}};t.default=r},"6b75":function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},7057:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("5530")),r={data:function(){return{bind_id:"",jp_address:"",jp_imgurl:"",jp_name:""}},methods:{getJPPayOrderInfo:function(){return{module:"app",action:"order",app:"payment",address_id:this.address_id,type:"JP",auction_id:this.bind_id,coupon_id:this.coupon_id,remarks:this.remarks}},getJPWalletPayData:function(e){return(0,n.default)({},e)}}};t.default=r},"9ee5":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".payModel[data-v-69535f96]{position:fixed;top:0;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;min-height:100vh;z-index:9999}.payModel-msg[data-v-69535f96]{width:100%;min-height:100vh;z-index:100001;background-color:rgba(0,0,0,.5);position:absolute}.payModel-card[data-v-69535f96]{width:100%;height:%?676?%;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;z-index:100002}.payModel-card-head[data-v-69535f96]{height:%?86?%;border-bottom:%?2?% solid #ddd;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?0?% %?40?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;position:relative;color:#020202;font-size:%?34?%;font-weight:700}.payModel-card-head uni-image[data-v-69535f96]{width:%?30?%;height:%?30?%;margin-right:%?20?%;position:absolute}.payModel-card-head uni-text[data-v-69535f96]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center}.payModel-card-body[data-v-69535f96]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.payModel-card-body .code[data-v-69535f96]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:%?50?%}.payModel-card-body .code-item[data-v-69535f96]{width:%?80?%;height:%?80?%;border:%?2?% solid #ddd;border-left:none;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.payModel-card-body .code-item[data-v-69535f96]:first-child{border-left:%?2?% solid #ddd}.payModel-card-body .forget[data-v-69535f96]{text-align:end;margin:%?24?% %?30?%;color:#0080ff}.payModel-card-keyboard[data-v-69535f96]{height:%?360?%}.payModel-card-keyboard .keyboard[data-v-69535f96]{width:100.5vw;display:grid;height:%?362?%;background:#eae9e8;grid-template-columns:1fr 1fr 1fr;grid-column-gap:%?-5?%}.payModel-card-keyboard .keyboard uni-view[data-v-69535f96]{background:#fff;font-size:%?40?%;font-weight:700;color:#020202;border:%?2?% solid #ddd;margin-left:-1px;margin-top:-1px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-sizing:border-box;box-sizing:border-box}.payModel-card-keyboard .keyboard uni-view.grey[data-v-69535f96]{background-color:#eae9e8}.payModel-card-keyboard .box0[data-v-69535f96]{grid-column-start:2}.box1[data-v-69535f96]{background:#eae9e8!important}\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 皮肤公共颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 订单模块颜色值 */\n/* 背景颜色 */\n/*  背景渐变色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */",""]),e.exports=t},b85c:function(e,t,a){"use strict";a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(a("06c5"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=(0,i.default)(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,d=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){d=!0,s=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(d)throw s}}}}},c35a:function(e,t,a){var i=a("23e7"),n=a("7e12");i({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},cdcd:function(e,t,a){"use strict";var i=a("4ea4");a("a9e3"),a("25eb"),a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("1da1")),r=i(a("5530")),s=a("12e9"),o=a("2f62"),d={ALI:"ali",WX:"wx",BAIDU:"baidu"},u={data:function(){return{open_wallet:!1,open_wxpay:!1,open_alipay:!1,open_baidu:!1,wxPayStatue:!1,useWallet:!1,aliPayStatue:!1,baidupayStatue:!1,pay_display:!1,password_status:!1,pay_password:"",enterless:!0,payTitle:"",fastTap:!1,payment:{jsapi_wechat:0,mini_wechat:0,app_wechat:0,alipay:0,alipay_minipay:0,tt_alipay:0,wallet_pay:0},pay_type:"",myappid:"",code:"",showPay:!1}},methods:(0,r.default)((0,r.default)({},(0,o.mapMutations)({status:"SET_STATUS"})),{},{clientTransferPay:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPaymentData();case 2:a=t.sent,"",e.pay_type===d.WX?"wxpay":e.pay_type===d.ALI&&"alipay",uni.hideLoading(),e._h5_pay(a);case 7:case"end":return t.stop()}}),t)})))()},_baidu_pay:function(e){var t=this;swan.requestPolymerPayment({orderInfo:{dealId:e.data.dealId,appKey:e.data.appKey,totalAmount:e.data.totalAmount,tpOrderId:e.data.tpOrderId,dealTitle:e.data.dealTitle,signFieldsRange:e.data.signFieldsRange,rsaSign:e.data.rsaSign,bizInfo:e.data.bizInfo},success:function(){uni.showToast({title:t.language.laikepay.paySuccess,duration:1e3,icon:"none"}),setTimeout((function(){uni.setStorageSync("payRes",t.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"}),t.pay_display=!1}),1e3)},fail:function(){t._pay_fail()}})},_tt_pay:function(e){var t=this;tt.requestPayment({data:e.data,success:function(){uni.showToast({title:t.language.laikepay.paySuccess,duration:1e3,icon:"none"}),setTimeout((function(){uni.setStorageSync("payRes",t.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"}),t.pay_display=!1}),1e3)},fail:function(){t._pay_fail()}})},_ali_mini_pay:function(e){var t=this;my.tradePay({tradeNO:e,success:function(e){9e3===e.resultCode?(uni.showToast({title:t.language.laikepay.paySuccess,icon:"none"}),setTimeout((function(){uni.setStorageSync("payRes",t.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"}),t.pay_display=!1}),1e3)):6001===e.resultCode&&setTimeout((function(){t._pay_fail()}),1e3)},fail:function(e){uni.showToast({title:e.memo,icon:"none"}),setTimeout((function(){t._pay_fail()}),1e3)}})},_app_pay:function(e,t){var a=this;uni.requestPayment({provider:e,orderInfo:t,success:function(){uni.showToast({title:a.language.laikepay.paySuccess,duration:1e3,icon:"none"}),setTimeout((function(){uni.setStorageSync("payRes",a.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"}),a.pay_display=!1}),1e3)},fail:function(e){a._pay_fail()},complete:function(){a.loading=!1}})},_wechat_mini_pay:function(e){var t=this;this.loading=!0,uni.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign,success:function(){uni.showToast({title:t.language.laikepay.paySuccess,duration:1e3,icon:"none"}),setTimeout((function(){uni.setStorageSync("payRes",t.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"})}),1e3)},fail:function(e){t._pay_fail()},complete:function(){t.loading=!1}})},_h5_pay:function(e){if(this.pay_type===d.ALI)window.location.href=uni.getStorageSync("endurl")+"order/"+this.sNo+"_alipay.html";else{var t=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appid,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(e){a.code="","get_brand_wcpay_request:ok"===e.err_msg?(uni.setStorageSync("payRes",a.order_pay_info),window.location.href=uni.getStorageSync("h5_url")+"pages/pay/payResult"):a._pay_fail()}))},a=this;"undefined"!==typeof WeixinJSBridge?t(e):"undefined"===typeof WeixinJSBridge&&(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t),document.attachEvent("onWeixinJSBridgeReady",t)))}},getOrderInfoExt:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={type:"",code:"",store_type:1},e.pay_type===d.WX?(a.type="jsapi_wechat",a.code=e.code):e.pay_type===d.ALI&&(a.type="alipay_mobile"),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})))()},show_pay_way:function(){Number.parseInt(this.payment.jsapi_wechat)&&(this.open_wxpay=!0),Number.parseInt(this.payment.wallet_pay)&&(this.chooseWay("balance"),this.open_wallet=!0,this.useWallet=!0)},chooseWay:function(e){switch(e){case"wxPay":this._chooseWxPayWay();break;case"aliPay":this._chooseAlipayPayWay();break;case"baidu":this._chooseBaiduPayWay();break;case"balance":this._chooseBalancePayWay();break;default:break}},_chooseWxPayWay:function(){this.useWallet=!1,this.wxPayStatue=!0,this.aliPayStatue=!1,this.baidupayStatue=!1},_chooseAlipayPayWay:function(){this.aliPayStatue?this.aliPayStatue=!1:(this.useWallet=!1,this.wxPayStatue=!1,this.aliPayStatue=!0,this.baidupayStatue=!1)},_chooseBaiduPayWay:function(){this.useWallet=!1,this.wxPayStatue=!1,this.aliPayStatue=!1,this.baidupayStatue=!0},_chooseBalancePayWay:function(){this.useWallet=!0,this.wxPayStatue=!1,this.aliPayStatue=!1,this.baidupayStatue=!1},_pay_fail:function(){var e=this;uni.showModal({title:this.language.showModal.hint,content:this.language.showModal.payFail,confirmText:this.language.showModal.confirm,cancelText:this.language.showModal.cancel,success:function(t){e.fastTap=!1,t.confirm?(e.status(1),uni.redirectTo({url:"/pages/order/myOrder?status=1"})):t.cancel&&uni.switchTab({url:"/pages/tabBar/home"})}})},_pay_fail_pt:function(){var e=this;uni.showModal({title:this.language.laikepay.hint,content:this.language.laikepay.payFail,confirmText:this.language.showModal.confirm,cancelText:this.language.showModal.cancel,success:function(t){e.fastTap=!1,t.confirm?(e.status(1),uni.redirectTo({url:"/pagesA/group/groupOrder?status=1"})):t.cancel&&uni.switchTab({url:"/pages/tabBar/home"})}})},wallet_pay_cancel:function(){if(this.fastTap)return!1;this.pay_display=!1,this.pay_password="",this._pay_fail()},wallet_pay_cancel_pt:function(){if(this.fastTap)return!1;this.pay_display=!1,this.pay_password="",this._pay_fail_pt()},check_pay_password:function(e){var t=this;if(!this.enterless)return uni.showToast({title:this.language.laikepay.mimaError,icon:"none"}),!1;this.pay_password=e;var a={module:"app",action:"user",app:"payment_password",password:e};this.$req.post({data:a}).then(function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(a){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=a.code,n=a.enterless,200!==i){e.next=9;break}return t.pay_display=!1,uni.showLoading({title:t.language.showLoading.paying,mask:!0}),e.next=6,t._wallet_pay();case 6:uni.hideLoading(),e.next=10;break;case 9:n?(t.pay_password="",uni.hideLoading(),uni.showToast({title:t.language.laikepay.pswdFail,duration:1e3,icon:"none"}),t.enterless=n):n||(uni.hideLoading(),t.enterless=!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},_check_order_status:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={module:"app",action:"order",m:"order_details",order_id:e.order_id},"pt"==e.ordertype&&(a.action="groupbuy"),t.next=4,e.$req.post({data:a});case 4:if(i=t.sent,n=i.data.status,n=Number.parseInt(n),7!==n&&6!==n){t.next=9;break}return t.abrupt("return",Promise.reject("订单已关闭，支付失败"));case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))()},_wallet_pay:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={module:"app",action:"pay",app:"wallet_pay",m:"wallet_pay",type:"wallet_pay",address_id:e.address_id?e.address_id:e.addre_id,order_list:e.order_pay_info,remarks:e.remarks,payment_money:e.total},e.bargain?a=e.getBargainWalletPayData(a):e.seckill?a=e.getSeckillWalletPayData(a):"jp"===e.pay_name&&(a=e.getJPWalletPayData(a)),e.is_express||(a.shop_address_id=e.shop_address_id),t.next=5,e.$req.post({data:a});case 5:if(i=t.sent,n=i.code,r=i.message,uni.hideLoading(),0!==n){t.next=12;break}return uni.showToast({title:r,duration:1e3,icon:"none"}),t.abrupt("return",!1);case 12:return uni.showToast({title:e.language.laikepay.paySuccess,duration:1e3,icon:"none"}),t.next=15,(0,s.later)(1e3);case 15:uni.setStorageSync("payRes",e.order_pay_info),uni.redirectTo({url:"/pages/pay/payResult"});case 17:case"end":return t.stop()}}),t)})))()},getPayTypeAndStoreType:function(){var e={pay_type:""};return this.wxPayStatue?e.pay_type="jsapi_wechat":this.aliPayStatue||this.baidupayStatue,e}}),watch:{enterless:function(e){e&&(this.fastTap=!0,this.pay_display=!1,uni.showToast({title:this.language.laikepay.maxFail,duration:1e3,icon:"none"}))}}};t.default=u},ce0a:function(e,t,a){var i=a("9ee5");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("cdd91cfc",i,!0,{sourceMap:!1,shadowMode:!1})},e174:function(e,t,a){"use strict";a.r(t);var i=a("0656"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},e9b5:function(e,t,a){"use strict";var i=a("ce0a"),n=a.n(i);n.a},eacb:function(e,t,a){"use strict";var i=a("4ea4");a("a9e3"),a("c35a"),a("b680"),a("d3b7"),a("ac1f"),a("466d"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("1da1")),r=i(a("ade3")),s=i(a("cdcd")),o=i(a("6915")),d=i(a("5582")),u=i(a("7057")),c={mixins:[s.default,o.default,d.default,u.default],data:function(){var e;return e={total:0,products_total:0,freight:0,freightt:"0",coupon_money:0,reduce_money:0,discount:1,grade_rate:1,sNo:"",user_money:0,fastTap:!1,buy_again:!1,order_pay_info:null,order_type:"type_",pay_name:"",is_express:!0,shop_status:!1,shop_address_id:"",shop_list:{address:"",id:0,mobile:"",name:""},address_id:"",hc_address_id:"",address:{name:""},adds_f:!1,kuaidi:0,deliverFee:"",deliveryNo:"",distance:"",fee:0},(0,r.default)(e,"sNo","0"),(0,r.default)(e,"remarks",""),e},computed:{shop_id:function(){return this.pro instanceof Array&&this.pro.length>0?this.pro[0].shop_id:0}},beforeDestroy:function(){if(uni.removeStorageSync("goodsInfo"),uni.removeStorageSync("bargain"),!this.bargain&&"jp"!==this.pay_name&&this.sNo&&this.order_id){var e=JSON.stringify({total:Number.parseFloat(this.total),order_id:this.order_id,sNo:this.sNo}),t={module:"app",app:"leave_Settlement",action:"order",order_list:e,price:this.total};if(this.$req.post({data:t}),this.buy_again){var a={module:"app",app:"del_cart",action:"order",cart_id:this.cart_id};this.$req.post({data:a})}}this.$store.state.order_id=""},destroyed:function(){uni.getStorageSync("chooseAddress")&&uni.removeStorageSync("chooseAddress")},watch:{total:function(){this.order_pay_info=JSON.stringify({total:Number.parseFloat(this.total),order_id:this.order_id,sNo:this.sNo}),console.log(this.order_pay_info,"赋值的快递")},address_id:function(e,t){t&&this._axios("address")},coupon_money:function(){this.total=((this.products_total-this.coupon_money-this.reduce_money)*this.discount*this.grade_rate+this.freight).toFixed(2)},freight:function(){this.total=((this.products_total-this.coupon_money-this.reduce_money)*this.discount*this.grade_rate+this.freight).toFixed(2)}},methods:{getCode:function(){var e=window.location.href;if(e.split("?").length>1){var t=e.split("?")[1],a=t.split("&");for(var i in a)"string"===typeof a[i]&&"code"===a[i].substring(0,4)&&(t=a[i].substring(5),this.code=t)}},checkCode:function(){if(""===this.code){if(!this.is_wx())return!1;var e=window.localStorage;e.removeItem("bargain"),e.removeItem("bargain_id"),e.removeItem("order_no"),e.removeItem("product"),uni.removeStorageSync("bargain"),this._toUrl()}},is_wx:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},order_pay:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.address_id,55555555),e.address_id){t.next=3;break}return t.abrupt("return",uni.showToast({title:e.language.toasts.order.setAdds,icon:"none"}));case 3:if(!e.fastTap){t.next=5;break}return t.abrupt("return",!1);case 5:if(e.fastTap=!0,e._checkSelectPayWay(),!e.useWallet){t.next=16;break}if(0!=e.password_status){t.next=11;break}return uni.showModal({title:e.language.showModal.hint,content:e.language.showModal.mima,confirmText:e.language.showModal.confirm,cancelText:e.language.showModal.cancel,showCancel:!0,success:function(t){e.fastTap=!0,t.confirm&&uni.navigateTo({url:"/pagesB/setUp/payment"})}}),t.abrupt("return",!1);case 11:return t.next=13,e._getPayOrderInfo();case 13:e._orderUseWalletPay(),t.next=21;break;case 16:return uni.showLoading({title:e.language.showLoading.axiospaying,mask:!0}),t.next=19,e._getPayOrderInfo();case 19:return t.next=21,e._notUserWalletPay();case 21:case"end":return t.stop()}}),t)})))()},_getPayOrderInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i,n,r,s,o,d,u,c,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.remarks,"string"!=typeof a&&(a=JSON.stringify(a)),i={module:"app",action:"order",app:"payment",cart_id:e.cart_id,address_id:e.address_id,coupon_id:e.coupon_id,kd_type:e.kuaidi,deliverFee:e.deliverFee,deliveryNo:e.deliveryNo,distance:e.distance,fee:e.fee,sNo:e.sNo,remarks:a},e.bargain?i=e.getBargainPayOrderInfo():e.seckill?i=e.getSeckillPayOrderInfo():"jp"===e.pay_name?i=e.getJPPayOrderInfo():1==e.is_distribution&&(i.type="FX"),e.cpId&&(i.product=e.cpId,i.cart_id=""),e.is_express||(i.shop_address_id=e.shop_address_id),n=e.getPayTypeAndStoreType(),r=n.pay_type,i.pay_type=r,t.next=10,e.$req.post({data:i});case 10:if(s=t.sent,o=s.data,d=s.code,u=s.msg,c=s.status,l=s.message,1===c){t.next=23;break}return p="",p=200!==d?u||l:e.language.toasts.order.errorTip,uni.showToast({title:p,duration:1500,icon:"none"}),e.pay_display=!1,setTimeout((function(){e.navBack()}),1500),t.abrupt("return",Promise.reject());case 23:e.sNo=o.sNo,e.order_id=o.order_id,e.$store.state.order_id=o.order_id,e.order_pay_info=JSON.stringify({total:Number.parseFloat(e.total),order_id:o.order_id,sNo:o.sNo});case 27:case"end":return t.stop()}}),t)})))()},_notUserWalletPay:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.wxPayStatue?e.pay_type="wx":e.aliPayStatue?e.pay_type="ali":e.baidupayStatue&&(e.pay_type="baidu"),t.next=3,e.clientTransferPay();case 3:case"end":return t.stop()}}),t)})))()},getPaymentData:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={module:"app",action:"pay",total:e.total,remarks:e.remarks,sNo:e.sNo,title:e.payTitle,order_list:e.order_pay_info},t.next=3,e.getOrderInfoExt();case 3:return i=t.sent,n=i.type,r=i.code,i.store_type,a.type=n,a.code=r,t.next=11,e.LaiKeTuiCommon.getMPAliAuthCode();case 11:return t.sent,t.next=15,e.$req.post({data:a});case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})))()},_orderUseWalletPay:function(){if(this.total>this.user_money)return uni.showToast({title:this.language.toasts.order.moneyMin,icon:"none",duration:1500}),this.fastTap=!1,!1;this.pay_display=!0},_checkSelectPayWay:function(){this.useWallet||this.wxPayStatue||this.aliPayStatue||this.baidupayStatue||uni.showToast({title:this.language.toasts.order.choosePay,duration:1e3,icon:"none"}),this.fastTap=!1},_toUrl:function(){var e=this,t=window.location.href,a=window.localStorage;a["bindding_num"]=this.bind_id,a["address_id"]=this.address_id,a["product"]=this.cpId;var i={type:"jsapi_wechat",app:"get_config",module:"app",action:"order",url:t};this.$req.post({data:i}).then((function(t){if(200===t.code){var a=t.data.config.appid;e.myappid=a;var i=t.data.url;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}else uni.showToast({title:t.message,duration:1500,icon:"none"})}))},handleOrderAddress:function(e,t,a){a&&t&&(this.shop_status=a,t instanceof Array?(this.shop_address_id="",uni.setStorageSync("shop_address_id","")):(this.shop_list=t,this.shop_address_id=t.id,uni.setStorageSync("shop_address_id",t.id))),e instanceof Array&&(e={name:""},this.shop_status=!1,this.shop_address={id:0},this.address_status=!1,this.shop_list={address:"",id:0,mobile:"",name:""}),this.address=e,this.address&&this.address.id?this.address_id=this.address.id:this.address_id="",this.address.name?this.adds_f=0!==this.address.length:this.adds_f=!1,this.address.name&&(this.$store.state.address_id_def||(this.$store.state.address_id_def=e.id))}}};t.default=c}}]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/seckill/seckill_detail"],{"41f7":function(i,t,s){"use strict";s.r(t);var e=s("72c9"),n=s.n(e);for(var a in e)"default"!==a&&function(i){s.d(t,i,(function(){return e[i]}))}(a);t["default"]=n.a},6869:function(i,t,s){"use strict";(function(i){s("1fd4");e(s("66fd"));var t=e(s("f905"));function e(i){return i&&i.__esModule?i:{default:i}}i(t.default)}).call(this,s("543d")["createPage"])},"72c9":function(i,t,s){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s("2f62"),n=s("2969");function a(i,t){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.push.apply(s,e)}return s}function o(i){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(i,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(s,t))}))}return i}function r(i,t,s){return t in i?Object.defineProperty(i,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[t]=s,i}var u=function(){s.e("components/skus").then(function(){return resolve(s("6910"))}.bind(null,s)).catch(s.oe)},h=function(){Promise.all([s.e("common/vendor"),s.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(s("e345"))}.bind(null,s)).catch(s.oe)},l={data:function(){return{is_seckill:!0,clicktimes:[],close:"",saves:"",hour:0,mniuate:0,second:0,day:0,attr_id:"",bargain:!1,shop_list:[],option:"",overflow:"scroll",mask_display1:!1,fastTap:!0,title:"秒杀商品",loadImg:!0,shop_id:"",bback_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/bback.png",fx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/fx.png",gw_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/gw.png",load_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/5-121204193R7.gif",you_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jiantouhei2x.png",kf_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/kefu.png",top_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/kaobei2x.png",guan_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/guanbi2x.png",wx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wechat.png",jian_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jian2x.png",jian_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jianhui2x.png",jia_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jia+2x.png",jia_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/add+2x.png",xing_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xinghei2x.png?v="+Math.random(),xing_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xinghui2x.png",erm_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmShare.png",erm_pyq_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wepyq.png",shixiao:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/shixiao.png",attrList:"",mask_display:!1,num:"",price:"",imgurl:"",pro:{},comments:"",haveSkuBean:"",numb:1,collection:"",goods_x:!0,goods_g:!1,g_show:!1,load:!0,shareMask:!1,saveEWM:!1,shares:{},shareContent:"一起来用豪眼光吧！",shareHref:"",shareHref2:"",sharehrefTitle:"一起来用豪眼光吧!",sharehrefDes:"一起来用豪眼光吧!",shareImg:"",shareDiv:!1,pic:"",logo:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lktlogo.png",pro_id:"",order_no:"",brStatus:"",bargain_id:"",ewmImg:"",login_status:"",sNo_id:0,show_rule:!1,shareMask_H5:!1,h5_url:"",isfx:"",shareshop:0,seckill:!0,lefttime:0,id:0,shareWay:[],allCartNum:0,status:"2",is_shop:!1,headerplus:!1,navType:0,swiperIndex:1,seckill_flag:!0,pages:"pagesB",msNum:"",selectedlist:"",pam:{},highKeys:{},skuName:"SkuID",skuName1:"Price",skuName2:"Pic",skuName3:"Stock",spliter:",",sku_list:{},result:{}}},computed:o({halfWidth:function(){var t=i.getStorageSync("data_height")?i.getStorageSync("data_height"):this.$store.state.data_height,s=parseInt(t);return s=0,s+"px"}},(0,e.mapState)({_cart_num:"cart_num"})),onLoad:function(t){var s=this;s.option=t,s.fastTap=!0,s.LaiKeTuiCommon.getLKTApiUrl().then((function(){s.isfx=t.isfx,t.productId?s.pro_id=t.productId:t.pro_id&&(s.pro_id=t.pro_id),s.navType=t.navType,s.id=t.id,1!=t.navType&&(s.seckill_flag=!1),s.brStatus=t.brStatus,s.attr_id=t.attr_id,s.order_no=t.order_no,s.sNo_id=t.sNo_id,s.isbegin=t.isbegin,""!=s.pro_id&&void 0!=s.pro_id||(s.pro_id=s.$store.state.pro_id),s.hasorder=t.hasorder,i.setStorageSync("fatherId",t.fatherId),s._axios()}))},onShow:function(){var t=this;this.allCartNum=this.$store.state.cart_num,this.close=this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close_bb.png",this.saves=this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/save.png",t.fastTap=!0,t.pro_id&&t._axios(),this.$nextTick((function(){i.getProvider({service:"share",success:function(i){}})}))},onShareAppMessage:function(t){var s=this;if(0!=this.login_status)return t.from,{title:this.sharehrefTitle,path:this.shareHref2,imageUrl:this.shareImg,bgImgUrl:this.shareImg,success:function(){s.shareHref2="/pages/goods/goodsDetailed?productId="+s.pro_id}};i.navigateTo({url:"/pages/login/login?landing_code=1"})},methods:o(o({powerset:function(i){for(var t=[[]],s=0;s<i.length;s++)for(var e=0,n=t.length;e<n;e++)t.push(t[e].concat(i[s]));return t},initData:function(){this.result={},this.keys=this.getAllKeys();for(var i=0;i<this.keys.length;i++)this.highKeys[this.keys[i]]=!1;this.sku_list=this.combineAttr(this.skuBeanList,this.keys),this.buildResult(this.sku_list.items),this.updateStatus(this.getSelectedItem(),!0);var t={};for(var s in this.result)s.includes(",")||0!=this.result[s].skus.Stock||(t[s]=this.result[s]);for(var e in this.sku_list.result)for(var n in this.sku_list.result[e])for(var a in t)n==a&&(this.sku_list.result[e][n].disabled=!0);this.showResult()},handleNormalClick:function(i,t){var s=JSON.parse(JSON.stringify(this.sku_list));for(var e in s.result[i])e!=t.name?s.result[i][e].active=!1:s.result[i][e].active=!0;this.sku_list=s},handleDisableClick:function(i,t){for(var s in this.sku_list.result[i][t.name]["disabled"]=!1,this.sku_list.result)if(s!=i)for(var e in this.sku_list.result[s])this.sku_list.result[s][e].active=!1;this.updateStatus(this.getSelectedItem())},highAttributes:function(){for(var i in this.sku_list.result)for(var t in this.highKeys[i]=!0,this.sku_list.result[i])if(!0===this.sku_list.result[i][t].active){this.highKeys[i]=!1;break}},handleActive:function(t,s){if(!0!==s.disabled){if(1==s.active)return!1;this.handleNormalClick(t,s),!0===s.disabled&&this.handleDisableClick(t,s),this.updateStatus(this.getSelectedItem()),this.highAttributes(),this.showResult()}else i.showToast({title:this.language.seckill.details.Tips[1],icon:"none"})},combineAttr:function(i,t){for(var s=[],e={},n=0;n<i.length;n++){for(var a=i[n],o=[],r=0;r<t.length;r++){var u=t[r];e[u]||(e[u]={}),e[u][a[u]]||(e[u][a[u]]={name:a[u],active:!1,disabled:!(a["Stock"]>0)}),o.push(a[u])}s.push({path:o.join(this.spliter),sku:a["SkuID"],price:a["Price"],Pic:a["Pic"],Stock:a["Stock"]})}return{result:e,items:s}},isJSON:function(i){if("string"==typeof i)try{JSON.parse(i);return!0}catch(t){return!1}},getAllKeys:function(){var i=[];for(var t in this.skuBeanList[0])this.skuBeanList[0].hasOwnProperty(t)&&t!==this.skuName&&t!==this.skuName1&&t!==this.skuName2&&t!==this.skuName3&&i.push(t);return 0==i.length&&(i=["undefined"],this.skuBeanList[0]["undefined"]="undefined"),i},getAttruites:function(i){for(var t=[],s=0;s<i.length;s++)t.push(i[s].path);return t},buildResult:function(i){for(var t=this,s=this.getAttruites(i),e={},n=0;n<s.length;n++)for(var a=s[n],o=i[n].sku,r=i[n].Pic,u=i[n].price,h=i[n].Stock,l=a.split(this.spliter),c=this.powerset(l),p=0;p<c.length;p++){var g=c[p],_=g.join(this.spliter);_&&!this.result[_]&&(this.result[_]={skus:{sku:o,Pic:r,price:u,Stock:h}},(!_.includes(",")&&!e[_]||_.includes(",")&&_.split(",").length<s[n].split(",").length)&&(e[_]={skus:{sku:o,Pic:r,price:u,Stock:h}}))}var d=function(i){for(var n in e[i].skus.Stock=0,t.result)i!=n&&n.split(",").length==s[0].split(",").length&&n.includes(i)?e[i].skus.Stock+=Number(t.result[n].skus.Stock):n.split(",").length==s[0].split(",").length&&function(){var s=[];n.split(",").filter((function(t){i.split(",").filter((function(i){t==i&&s.push(!0)}))})),s.length==i.split(",").length&&(e[i].skus.Stock+=Number(t.result[n].skus.Stock))}()};for(var f in e)d(f);Object.assign(this.result,e)},getSelectedItem:function(){var i=[];for(var t in this.sku_list.result){var s="";for(var e in this.sku_list.result[t])!0===this.sku_list.result[t][e].active&&(s=e);i.push(s)}return i},updateStatus:function(i,t){for(var s=0;s<this.keys.length;s++){var e=this.keys[s],n=this.sku_list.result[e],a=(i[s],i.slice());for(var o in n){var r=n[o]["name"];if(i[s]!=r){a[s]=r;var u=this.trimSpliter(a.join(this.spliter),this.spliter);this.sku_list.result[e][o]["disabled"]=t?!this.result[u]:!(this.result[u].skus.Stock>0)}}}},trimSpliter:function(i,t){var s=new RegExp("^"+t+"+","g"),e=new RegExp(t+"+$","g"),n=new RegExp(t+"+","g");return i.replace(s,"").replace(e,"").replace(n,t)},initSeleted:function(i){for(var t in this.skuBeanList)if(this.skuBeanList[t][this.skuName]==i){for(var s in this.skuBeanList[t])s!==this.skuName&&s!==this.skuName1&&s!==this.skuName2&&s!==this.skuName3&&(this.sku_list.result[s][this.skuBeanList[t][s]].active=!0);break}},showResult:function(){for(var i=this.getSelectedItem(),t=[],s=0;s<i.length;s++){var e=i[s];e&&t.push(e)}if(t.length>0&&(this.num=this.result[t.join(this.spliter)].skus.Stock),t.length==this.keys.length){var n=this.result[t.join(this.spliter)];n&&(this.SkuID=n.skus.sku,this.Pic=n.skus.Pic,this.price=n.skus.price,this.Stock=n.skus.Stock,Number(this.numb)>Number(this.Stock)&&(this.numb=Number(this.Stock))),this.haveSkuBean={name:t.join(this.spliter),cid:n.skus.sku,skus:n.skus}}else this.haveSkuBean=""},setHead:function(){var t=this,s=i.createSelectorQuery().in(this);s.select("#boxs").boundingClientRect((function(i){i.top>-20?t.headerplus=!1:i.top<-20&&(t.headerplus=!0)})).exec()},cancle:function(){this.fastTap=!0},changeLoginStatus:function(){this.login_status=1,this.fastTap=!0,this._axios()},copy_url:function(){this.shareMask_H5=!0,this.h5_url=this.shareHref},copyH5Url:function(){jQuery("#h5_input input").select(),document.execCommand("Copy")},lodingPay:function(t){i.navigateTo({url:"../../pages/order/order?order_id="+t+"&showPay=true"})},goPay:function(){var t=this,s=[];s.push({pid:this.pro_id}),s.push({cid:this.attr_id}),s.push({num:1}),s=JSON.stringify(s),i.navigateTo({url:"/pagesB/seckill/seckillDetailsr?product="+s+"&bargain=true&bargain_id="+t.bargain_id+"&order_no="+t.order_no})},toBrFirst:function(){i.navigateTo({url:"/pagesA/bargain/bargain?topTabBar=true"})},toBr:function(){var i=this;(0,n.LaiKeTuiToBr)(i)},_goStore:function(t){i.navigateTo({url:"/pagesA/store/store?shop_id="+t})},_loadImg:function(){this.loadImg=!0},_closeAllMask:function(){this.shareMask=!1,this.saveEWM=!1,this.shareMask_H5=!1,this.overflow="scroll"},_shareDiv:function(){this.shareDiv=!1},_invite:function(i){var t=this;(0,n.LaiKeTuiInvite)(i,t)},_goback:function(){if("true"==this.isfx)return i.reLaunch({url:"/pages/tabBar/home"}),!1;i.navigateBack({delta:1})},_downEWM:function(){var t=this;i.getImageInfo({src:t.ewmImg,success:function(t){i.saveImageToPhotosAlbum({filePath:t.path,success:function(){i.showToast({title:this.language.seckill.details.Tips[2],duration:1500,icon:"none"})}})},fail:function(){i.showToast({title:this.language.seckill.details.Tips[3],duration:1500,icon:"none"})}})},_shareApp:function(t){var s=this,e="";1==t?e="WXSenceTimeline":2==t&&(e="WXSceneSession"),i.share({provider:"weixin",scene:e,type:2,imageUrl:s.ewmImg,success:function(i){},fail:function(i){}})},showShareMask:function(t){var s=this;if(t&&t>0){s.is_shop=!0,s.shop_id=t,s.sharehrefTitle=s.shop_list.shop_name,s.shareImg=s.shop_list.shop_logo,s.shareContent=s.shop_list.shop_name;var e=i.getStorageSync("h5_url");s.shareHref=e+"pagesA/store/store?is_share=true&shop_id="+t,s.shareHref2="../../pagesA/store/store?is_share=true&shop_id="+t}else{s.is_shop=!1,s.shareHref2="/pages/goods/goodsDetailed?productId="+s.pro_id,s.sharehrefTitle=s.pro.name,s.shareImg=s.imgurl,s.shareContent=s.pro.name;e=i.getStorageSync("h5_url");s.shareHref=e+"pages/index/share?pages=goodsDetailed&productId="+s.pro_id+"&isfx=true",1==s.pro.is_distribution&&(s.shareHref=e+"pages/index/share?pages=goodsDetailed&productId="+s.pro_id+"&isfx=true&fatherId="+s.pro.user_id)}this.isLogin((function(){s.shareMask=!0}))},closeShareMask:function(){this.shareMask=!1,this.overflow="scroll"},showSaveEWM:function(i){var t=this;t.is_shop?(0,n.LaiKeTuiShopEWM)(i,t):(0,n.LaiKeTuiShowSaveEWM)(i,t)},kf:function(t){this.isLogin((function(){i.navigateTo({url:"/pages/message/service?pid="+t})}))},_reduce:function(){this.numb>1&&Boolean(this.haveSkuBean)?this.numb--:this.haveSkuBean?(this.numb,i.showToast({title:this.language.seckill.details.Tips[7],duration:1e3,icon:"none"})):i.showToast({title:this.language.seckill.details.Tips[6],duration:1e3,icon:"none"})},_add:function(){this.num=this.pro.num,this.numb>=this.pro.buy_num-this.pro.purchased?i.showToast({title:this.language.seckill.details.Tips[9]+this.pro.buy_num+this.language.seckill.details.piece,duration:1e3,icon:"none"}):this.numb>=this.pro.num?i.showToast({title:this.language.seckill.details.Tips[8],duration:1e3,icon:"none"}):this.numb<this.num&&this.numb<this.pro.buy_num&&Boolean(this.haveSkuBean)?this.numb++:this.haveSkuBean?this.numb<this.pro.buy_num-this.pro.purchased?i.showToast({title:this.language.seckill.details.Tips[9]+this.pro.buy_num+this.language.seckill.details.piece,duration:1e3,icon:"none"}):i.showToast({title:this.language.seckill.details.Tips[10],duration:1e3,icon:"none"}):i.showToast({title:this.language.seckill.details.Tips[6],duration:1e3,icon:"none"})},_load_img:function(){this.load=!1},_goods_x:function(){this.goods_x=!0,this.goods_g=!1},_goods_g:function(){this.goods_x=!1,this.goods_g=!0}},(0,e.mapMutations)({cart_id:"SET_CART_ID",order_id:"SET_ORDER_ID",address_id:"SET_ADDRESS_ID",pay_lx:"SET_PAY_LX",cart_num:"SET_CART_NUM"})),{},{_evaluate:function(t){this.bargain?i.navigateTo({url:"/pages/evaluate/evaluate?bargain=true&pid="+t}):i.navigateTo({url:"/pages/evaluate/evaluate?pid="+t})},_collection:function(){var i=this;(0,n.LaiKeTui_collection)(i)},_selectG:function(){this.type=1,this._mask_display()},_shopping:function(){var t=this;2==t.status?(0,n.LaiKeTui_shopping)(t):i.showToast({title:this.language.seckill.details.Tips[11],icon:"none"})},_shopping1:function(){return 0==this.navType?(i.showToast({title:this.language.seckill.details.Tips[12],icon:"none"}),!1):2==this.navType?(i.showToast({title:this.language.seckill.details.Tips[13],icon:"none"}),!1):this.pro.buy_num<=this.pro.purchased?(i.showToast({title:this.language.seckill.details.Tips[9]+this.pro.buy_num+this.language.seckill.details.piece,icon:"none"}),!1):(this.type=1,this.fastTap=!0,this.price=this.pro.price,void this._mask_display())},getCoupon:function(){var i=this;(0,n.LaiKeTuiGetCoupon)(i)},_buy:function(){var t=this;if(this.pro.buy_num<=this.pro.purchased)return i.showToast({title:this.language.seckill.details.Tips[9]+this.pro.buy_num+this.language.seckill.details.piece,icon:"none"}),!1;2==t.status?(t.price=t.pro.price,t.LaiKeTuiCommon.laiketuiNoDoublePress(t,t._buy_handle)):i.showToast({title:this.language.seckill.details.Tips[11],icon:"none"})},_buy_handle:function(){var i=this;(0,n.LaiKeTui_buy_handle)(i)},_mask_display:function(){this.mask_display=!0,this.overflow="hidden"},_mask_false:function(){this.overflow="scroll";var i=this;this.mask_display1=!0,setTimeout((function(){i.mask_display=!1,i.mask_display1=!1}),500);for(var t=0;t<this.attrList.length;t++)for(var s=0;s<this.attrList[t].attr.length;s++)this.attrList[t].attr[s].select=!1},_mask_f:function(){this.haveSkuBean="",this.initData(),this._mask_false(),this.overflow="scroll"},confirm:function(i){Object.assign(this.$data,i),this._confirm()},_confirm:function(){var i=this;(0,n.LaiKeTui_confirm)(i)},_spec:function(){var i=this;(0,n.LaiKeTui_spec)(i)},showState:function(i,t){var s=this;(0,n.LaiKeTuiShowState)(s,i,t)},_axios:function(){var i=this;(0,n.LaiKeTui_axios)(i)},timeout:function(){var t=this;i.showToast({title:this.language.seckill.details.Tips[14],duration:1e3,icon:"none"}),setTimeout((function(){t.fastTap=!0,t.haveSkuBean="",t.login_status=0,i.navigateTo({url:"../login/login"})}),1e3)},weiperChange:function(i){this.swiperIndex=i.detail.current+1},_remain_time:function(i){var t=i.lefttime,s="0",e="0";t>60&&(s=parseInt(t/60),t=parseInt(t%60),s>60&&(e=parseInt(s/60),s=parseInt(s%60))),i.count_hour=e<10?"0"+e:e,i.count_min=s<10?"0"+s:s,i.count_s=t<10?"0"+t:t,this.pro=i,this.msNum=this.pro.num,this._setTime()},_setTime:function(){var i=this;clearTimeout(i.settime),i.settime=setTimeout((function(){if(i.pro.lefttime>0&&(i.pro.lefttime--,i._remain_time(i.pro)),0==i.pro.lefttime)return i.navType=0,void(i.seckill_flag=!1);i._setTime()}),1e3)}}),components:{wxParse:h,skus:u}};t.default=l}).call(this,s("543d")["default"])},c10f:function(i,t,s){"use strict";var e=s("d100"),n=s.n(e);n.a},d100:function(i,t,s){},dc64:function(i,t,s){"use strict";var e;s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return e}));var n=function(){var i=this,t=i.$createElement;i._self._c},a=[]},f905:function(i,t,s){"use strict";s.r(t);var e=s("dc64"),n=s("41f7");for(var a in n)"default"!==a&&function(i){s.d(t,i,(function(){return n[i]}))}(a);s("c10f");var o,r=s("f0c5"),u=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,"efb5471e",null,!1,e["a"],o);t["default"]=u.exports}},[["6869","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order_payment"],{3147:function(e,t,r){"use strict";(function(e){r("1fd4");n(r("66fd"));var t=n(r("86e5"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"86e5":function(e,t,r){"use strict";r.r(t);var n=r("f4cf"),a=r("b7d6");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);var s,u=r("f0c5"),i=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"257a3a68",null,!1,n["a"],s);t["default"]=i.exports},b7d6:function(e,t,r){"use strict";r.r(t);var n=r("d721"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},d721:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r("a34a")),a=u(r("525e")),o=u(r("d0f5")),s=r("b5b5");function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,a,o,s){try{var u=e[o](s),i=u.value}catch(c){return void r(c)}u.done?t(i):Promise.resolve(i).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,u,"next",e)}function u(e){i(o,n,a,s,u,"throw",e)}s(void 0)}))}}var d=function(){r.e("components/paymodel").then(function(){return resolve(r("9d0c"))}.bind(null,r)).catch(r.oe)},l=function(){r.e("components/choose-pay").then(function(){return resolve(r("6e52"))}.bind(null,r)).catch(r.oe)},p=function(){r.e("components/order/submit-order").then(function(){return resolve(r("d3e7"))}.bind(null,r)).catch(r.oe)},f={data:function(){return{tmplIds:["2KrrJchj92YRKhZZ0SSHz76dmrT0cLBJ2Wfe0","ncs3u3Bmmi0jW7EXAik4KQvxF3JxbaulWNwbLXDto","CZAPo_TqOOeC5K7XYvBeB_LXmyXKIhXkZROArNZDwQ8"],ordertype:""}},mixins:[a.default,o.default],components:{paymodel:d,choosePay:l,submitOrder:p},onLoad:function(e){this.ordertype=e.ordertype,this.getCode(),this.order_id=e.order_id,e.showPay&&(this.showPay=!0),this.checkCode(),this._axios()},onUnload:function(){},methods:{_pay_fail:function(){var t=this;e.showModal({title:this.language.showModal.hint,content:this.language.showModal.payFail,confirmText:this.language.showModal.confirm,cancelText:this.language.showModal.cancel,success:function(r){if(t.fastTap=!1,r.confirm){t.status(1);var n="/pages/order/myOrder?status=1";"pt"===t.ordertype&&(n="/pagesA/group/groupOrder?status=1"),e.redirectTo({url:n})}else r.cancel&&e.switchTab({url:"/pages/tabBar/home"})}})},order_pay:function(){var t=this;return c(n.default.mark((function r(){return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.fastTap){r.next=2;break}return r.abrupt("return",!1);case 2:if(t.fastTap=!0,!t.showPay){r.next=14;break}return r.prev=4,r.next=7,t._check_order_status();case 7:r.next=14;break;case 9:return r.prev=9,r.t0=r["catch"](4),e.showToast({title:r.t0,icon:"none"}),t.fastTap=!1,r.abrupt("return",!1);case 14:t._checkSelectPayWay(),e.showLoading({title:t.language.order.order_pay.Tips[0]}),wx.requestSubscribeMessage({tmplIds:t.tmplIds,complete:function(){var r=c(n.default.mark((function r(){return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.hideLoading(),!t.useWallet){r.next=8;break}if(t.sNo){r.next=5;break}return r.next=5,t._getPayOrderInfo();case 5:t._orderUseWalletPay(),r.next=10;break;case 8:e.showLoading({title:t.language.order.order_pay.Tips[1],mask:!0}),t._notUserWalletPay();case 10:case"end":return r.stop()}}),r)})));function a(){return r.apply(this,arguments)}return a}()});case 17:case"end":return r.stop()}}),r,null,[[4,9]])})))()},getPaymentData:function(){var e=this;return c(n.default.mark((function t(){var r,a,o,s,u;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={module:"app",action:"pay",total:e.total,sNo:e.sNo,title:e.payTitle},t.next=3,e.getOrderInfoExt();case 3:return a=t.sent,o=a.type,s=a.code,u=a.store_type,r.type=o,r.code=s,r.store_type=u,t.next=12,e.LaiKeTuiCommon.getMPAliAuthCode();case 12:return t.sent,t.next=16,e.$req.post({data:r});case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)})))()},_wallet_pay:function(){var t=this;return c(n.default.mark((function r(){var a,o,u;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={module:"app",action:"pay",app:"wallet_pay",m:"wallet_pay",type:"wallet_pay",order_id:t.order_id,sNo:t.sNo,parameter:"order",payment_money:t.total},r.next=3,t.$req.post({data:a});case 3:if(o=r.sent,u=o.code,e.hideLoading(),0!==u){r.next=9;break}return e.showToast({title:o.err,duration:1e3,icon:"none"}),r.abrupt("return",!1);case 9:return e.showToast({title:t.language.order.order_pay.Tips[2],duration:1e3,icon:"none"}),r.next=12,(0,s.later)(1e3);case 12:e.setStorageSync("payRes",t.order_pay_info),e.redirectTo({url:"/pages/pay/payResult"});case 14:case"end":return r.stop()}}),r)})))()},_axios:function(){var e=this,t="order";"pt"===this.ordertype?t="groupbuy":"KJ"===this.ordertype&&(t="bargain");var r={order_id:this.order_id,module:"app",action:t,app:"order_details",m:"order_details"};this.$req.post({data:r}).then((function(t){var r=t.data,n=r.z_price,a=r.payment,o=r.user_money,s=r.sNo,u=r.list;e.total=n,e.payment=a,e.user_money=Number.parseFloat(o),e.sNo=s,e.payTitle=u[0].p_name,e.show_pay_way()}))}}};t.default=f}).call(this,r("543d")["default"])},f4cf:function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement;e._self._c},o=[]}},[["3147","common/runtime","common/vendor"]]]);
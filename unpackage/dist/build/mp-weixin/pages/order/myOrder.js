(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/myOrder"],{"2bb7":function(e,t,r){"use strict";r.r(t);var a=r("54f6"),o=r("3fbe");for(var n in o)"default"!==n&&function(e){r.d(t,e,(function(){return o[e]}))}(n);r("2edf");var i,s=r("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"3d9a8be3",null,!1,a["a"],i);t["default"]=u.exports},"2edf":function(e,t,r){"use strict";var a=r("598f"),o=r.n(a);o.a},"3fbe":function(e,t,r){"use strict";r.r(t);var a=r("44d3"),o=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},"44d3":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r("a34a")),o=r("2f62"),n=i(r("c7af"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,a,o,n,i){try{var s=e[n](i),u=s.value}catch(d){return void r(d)}s.done?t(u):Promise.resolve(u).then(a,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function i(e){s(n,a,o,i,u,"next",e)}function u(e){s(n,a,o,i,u,"throw",e)}i(void 0)}))}}function d(e){return f(e)||p(e)||l(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function p(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(){r.e("components/delModel").then(function(){return resolve(r("4557"))}.bind(null,r)).catch(r.oe)},T={data:function(){return{tape_kd:1,receiving_check:{por_list:[]},receiving_shop:{flag:!1,bottom:""},can_del:!0,fastTap:!0,title:"我的订单",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",serchimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/searchNew.png",noOrder:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/noOrder.png",bback:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/bback.png",search2x:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/search2x.png",integral_hong:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/integral.png",integral_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral_hei.png",finish2x:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/finish2x.png",head:!0,header:["全部","待付款","待发货","待收货","待评价"],rightText:["立即付款","提醒发货","确认收货","待评价","退货","追加评价","再次购买","拼团详情","邀请好友"],leftText:["取消订单","查看物流","删除订单","查看详情","拼团详情"],order:[],status_id:"",sreach_value:"",page:1,allLoaded:!1,loading:!1,del_num:0,load:!0,timer:null,count:"",flag:!0,loadingType:0,value:"",alertTips:!1,pay_name:"MYORDER",shouhuoData:[],isDelModel:!1}},onReachBottom:function(){this._rollBottom()},onLoad:function(t){var r=this;this.receiving_shop.bottom=e.upx2px(160),wx.getSystemInfo({success:function(e){r.receiving_shop.bottom-=e.statusBarHeight}}),this.setLang();var a=this.language.order.myorder;this.header=[a.whole,a.to_paid,a.to_delivered,a.to_Receiving,a.to_evaluated]},computed:{imgWidth:function(){if(this.receiving_check.por_list&&this.receiving_check.por_list.length>1){var t=150*this.receiving_check.por_list.length;return e.upx2px(t)+"px"}}},watch:{value:function(e,t){this.changeValue()}},beforeDestroy:function(){clearInterval(this.timer),this.order=[]},onShow:function(){this.load=!0,this.status_id=this.$store.state.status,this.access_id?(this._axios(),this.page=1,this.loadingType=0):this.load=!1,this.flag=!0},components:{delModel:v},methods:g(g({},(0,o.mapMutations)({cart_id:"SET_CART_ID",order_id:"SET_ORDER_ID",address_id:"SET_ADDRESS_ID",status:"SET_STATUS"})),{},{onModeOk:function(){this.isDelModel=!this.isDelModel},getOrderType:function(e){0==this.status_id?e.order_type="":1==this.status_id?e.order_type="payment":2==this.status_id?e.order_type="send":3==this.status_id?e.order_type="receipt":4==this.status_id&&(e.order_type="evaluete")},changeLoginStatus:function(){this._axios()},_rollBottom:function(){var e=this;if(0==this.loadingType){var t=this;this.loadingType=1;var r={module:"app",action:"order",app:"load_more",page:this.page};this.getOrderType(r),this.$req.post({data:r}).then((function(a){var o,i=a.order;(e.page++,i.length>0)?((0,n.default)(i,r.order_type,t),i=i.map((function(e){return(e.subtraction_list instanceof Array||!e.subtraction_list)&&(e.subtraction_list={product_title:"",num:"",imgurl:""}),e})),(o=e.order).push.apply(o,d(i)),e.del_num=0,e.loadingType=0):e.loadingType=2}))}},_selTips:function(t){var r=this;if(t){var a=this.shouhuoData["orde_id"],o={module:"app",action:"order",app:"ok_Order",order_id:a};this.$req.post({data:o}).then((function(t){var a=t.code;t.message;200===a?(e.showToast({title:r.language.order.orderSearch.Tips2[4],duration:1e3,icon:"none"}),r.alertTips=!1,setTimeout((function(){r._axios()}),1e3)):e.showToast({title:t.message,duration:1500,icon:"none"})}))}else this.alertTips=!1},_goStore:function(t){e.navigateTo({url:"/pagesA/store/store?shop_id="+t})},_toHome:function(){e.switchTab({url:"/pages/tabBar/home"})},_navigateTo:function(t,r,a){var o="/pages/order/order?order_id="+r;0==t&&(o+="&showPay=true"),e.navigateTo({url:o}),this.flag=!1},_header_index:function(e){var t=this;this.isLogin((function(){t.page=1,"1"==e?(t.status(1),t.status_id=t.$store.state.status):"2"==e?(t.status(2),t.status_id=t.$store.state.status):"3"==e?(t.status(3),t.status_id=t.$store.state.status):"4"==e?(t.status(4),t.status_id=t.$store.state.status):"0"==e&&(t.status(0),t.status_id=t.$store.state.status),t._axios()}))},_axios:function(){var t=this,r={module:"app",action:"order",app:"index"},a=this;this.getOrderType(r),this.access_id&&this.$req.post({data:r}).then((function(e){var o,i=e.order;t.order=[],setTimeout((function(){t.load=!1}),300),(0,n.default)(i,r.order_type,a),i instanceof Array&&(i=i.map((function(e){return(e.subtraction_list instanceof Array||!e.subtraction_list)&&(e.subtraction_list={product_title:"",num:"",imgurl:""}),e}))),(o=t.order).push.apply(o,d(i)),i.length<10?t.allLoaded=!0:t.allLoaded=!1})).catch((function(t){e.showToast({title:t.message,duration:1500,icon:"none"})}))},comment:function(t){var r=t.id,a=t.comments_type;1==a?e.navigateTo({url:"../evaluate/evaluating?order_details_id="+r+"&num=all"}):e.navigateTo({url:"../evaluate/evaluating?order_details_id="+r+"&add=true&num=all"})},_buttonLeft:function(t,r,a,o){var n=this;this.tape_kd=r.list[0].kd_type;var i=r.id,s=r.sNo,u=r.status;r.delivery_status,a.attribute_id,a.p_id;if(!this.can_del)return!1;this.can_del=!1,setTimeout((function(){n.can_del=!0}),1500),this.fastTap=!1;var d=s.substr(0,2),c={module:"app",action:"order",order_id:i};if(0==u)e.showModal({title:this.language.order.myorder.prompt1,content:this.language.order.myorder.sure1,success:function(t){t.confirm?(c.app="removeOrder",n.$req.post({data:c}).then((function(t){var r=t.code;t.message;200===r&&e.showToast({title:n.language.order.orderSearch.Tips2[0],duration:1e3,icon:"none"}),n._axios()}))):t.cancel&&(n.fastTap=!0)}});else if(2==u||3==u||5==u){this.fastTap=!0;var l={module:"app",action:"order",app:"logistics",id:s,o_source:1,type:""};1==this.source&&(l.type="pond"),this.$req.post({data:l}).then((function(t){if(e.hideLoading(),200==t.code){var a=t.res;a.length>1?e.navigateTo({url:"/pagesB/expressage/expressage?sNo="+s}):1==r.list[0].kd_type?e.navigateTo({url:"/pages/expressage/expressage?list="+JSON.stringify(a[0])+"&sNo="+s}):2==r.list[0].kd_type&&e.navigateTo({url:"/pages/expressage/fangdada?start="+a.supplierLng+","+a.supplierLat+"&dest="+a.transporterLng+","+a.transporterLat})}else e.showToast({title:t.message,duration:1500,icon:"none"})})).catch((function(t){e.showToast({title:n.language.order.orderSearch.Tips[2],duration:2e3,icon:"none"})}))}else if(12==u||4==u||1==u&&"PT"!=d)this.fastTap=!0,e.navigateTo({url:"/pages/order/order?order_id="+i});else if(9==u||10==u||1==u&&"PT"==d){this.fastTap=!0;var p="/pagesA/group/group_end?sNo="+s+"&returnR=1";e.navigateTo({url:p})}else 7!=u&&6!=u&&11!=u&&12!=u||e.showModal({title:this.language.order.myorder.prompt,content:this.language.order.myorder.sure,success:function(t){t.confirm?(c.app="del_order",n.$req.post({data:c}).then((function(t){var r=t.code,a=t.message;200==r?(e.showToast({title:n.language.order.myorder.delete_success,duration:1e3,icon:"none"}),n.order.splice(o,1),n.del_num++,n.del_num>=5&&n._rollBottom()):e.showToast({title:a,duration:1e3,icon:"none"}),n.fastTap=!0}))):t.cancel&&(n.fastTap=!0)}})},_check_order_status:function(e,t,r){var o=this;return u(a.default.mark((function n(){var i,s,u;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={module:"app",action:"order",app:"order_details",order_id:e},a.next=3,o.$req.post({data:i});case 3:if(s=a.sent,u=s.data.status,u=Number.parseInt(u),r=Number.parseInt(r),7!==u&&6!==u||u===r){a.next=11;break}if(t!=o.language.order.myorder.Buy_again){a.next=10;break}return a.abrupt("return",Promise.resolve());case 10:return a.abrupt("return",Promise.reject(o.language.order.myorder.order_gb));case 11:return a.abrupt("return",Promise.resolve());case 12:case"end":return a.stop()}}),n)})))()},_buttonRight:function(t,r,o,n,i){var s=this;return u(a.default.mark((function t(){var n,u,d,c,l,p;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=r.id,u=r.sNo,d=r.status,c=r.delivery_status,r.list,o.attribute_id,o.p_id,t.prev=2,t.next=5,s._check_order_status(n,i,d);case 5:t.next=13;break;case 7:return t.prev=7,t.t0=t["catch"](2),e.showToast({title:t.t0,icon:"none"}),s._axios(),s.fastTap=!1,t.abrupt("return",!1);case 13:if(u.substr(0,2),7!=d&&6!=d&&12!=d){t.next=19;break}l={module:"app",action:"order ",app:"buy_again",id:n},s.$req.post({data:l}).then((function(t){var r=t.cart_id,a=t.code,o=t.message;200==a?(s.cart_id(r),s.order_id(""),s.address_id(""),s.$store.state.cart_id=r,e.navigateTo({url:"/pages/pay/orderDetailsr?buy_again=true&cart_id="+r})):e.showToast({title:o,duration:1500,icon:"none"})})),t.next=54;break;case 19:if(0!=d){t.next=26;break}s.order_id(n),s.address_id(""),p="/pages/order/order_payment?order_id="+n+"&showPay=true&ordertype="+r.otype,e.navigateTo({url:p}),t.next=54;break;case 26:if(1!=d){t.next=33;break}if(s.fastTap){t.next=29;break}return t.abrupt("return");case 29:s.fastTap=!1,0==c?(l={module:"app",order_id:n,app:"delivery_delivery",action:"order"},s.$req.post({data:l}).then((function(t){s.fastTap=!0,200==t.code?(e.showToast({title:s.language.order.myorder.deliver_goods2,duration:1e3,icon:"none"}),s._axios()):e.showToast({title:t.message,duration:1500,icon:"none"})}))):s.fastTap=!0,t.next=54;break;case 33:if(4!=d){t.next=37;break}e.navigateTo({url:"/pages/order/order?order_id="+n}),t.next=54;break;case 37:if(3!=d){t.next=41;break}e.navigateTo({url:"/pages/evaluate/evaluating?order_details_id="+n+"&num=all"}),t.next=54;break;case 41:if(5!=d){t.next=45;break}e.navigateTo({url:"/pages/evaluate/evaluating?order_details_id="+n+"&add=true&num=all"}),t.next=54;break;case 45:if(9!=d&&10!=d&&11!=d){t.next=50;break}p="/pagesA/group/group_end?sNo="+u,e.navigateTo({url:p}),t.next=54;break;case 50:if(2!=d){t.next=54;break}return s.shouhuoData["orde_id"]=n,s.alertTips=!0,t.abrupt("return",!1);case 54:case"end":return t.stop()}}),t,null,[[2,7]])})))()},back_click:function(){e.showToast({title:this.language.order.myorder.deliver_goods3,duration:1e3,icon:"none"})},_seart:function(){""===this.sreach_value?e.showToast({title:this.language.order.myorder.search_gjc,duration:1e3,icon:"none"}):e.navigateTo({url:"/pages/order/orderSearch?sreach_value="+this.sreach_value})},receiving_stop:function(){this.receiving_shop.flag=!1},deleteOrder:function(t,r,a,o){var n=this;e.showModal({title:this.language.order.myorder.prompt,content:this.language.order.myorder.sure,success:function(t){if(t.confirm){var a={module:"app",action:"order",order_id:r.id,app:"del_order"};n.$req.post({data:a}).then((function(t){var r=t.code,a=t.message;200==r?(e.showToast({title:n.language.order.myorder.delete_success,duration:1e3,icon:"none"}),setTimeout((function(){n.page=1,n._axios()}),1e3)):e.showToast({title:a,duration:1e3,icon:"none"})}))}else t.cancel&&(n.fastTap=!0)}})},_receiving:function(t){var r=this,a={module:"app",app:"see_extraction_code",action:"order",order_id:t.id};this.$req.post({data:a}).then((function(t){r.receiving_shop.flag=!0,r.fastTap=!0;var a=t.code,o=t.list,n=t.message;200===a?r.receiving_check=o:e.showToast({title:n,duration:1500,icon:"none"})}))},returnGoods:function(e){var t="";return t=1==e.re_type||2==e.re_type?"退款":"退换",4==e.r_status?t+="中":t+="成功",t}})};t.default=T}).call(this,r("543d")["default"])},"54f6":function(e,t,r){"use strict";var a;r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement;e._self._c},n=[]},"598f":function(e,t,r){},a42f:function(e,t,r){"use strict";(function(e){r("1fd4");a(r("66fd"));var t=a(r("2bb7"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])}},[["a42f","common/runtime","common/vendor"]]]);
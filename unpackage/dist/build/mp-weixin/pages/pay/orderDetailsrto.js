(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/orderDetailsrto"],{"0846":function(t,i,e){},"5d17":function(t,i,e){"use strict";var s;e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return s}));var o=function(){var t=this,i=t.$createElement;t._self._c},a=[]},"67de":function(t,i,e){"use strict";e.r(i);var s=e("8cc8"),o=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);i["default"]=o.a},"718e":function(t,i,e){"use strict";e.r(i);var s=e("5d17"),o=e("67de");for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("c65c");var n,r=e("f0c5"),d=Object(r["a"])(o["default"],s["b"],s["c"],!1,null,"f8c66714",null,!1,s["a"],n);i["default"]=d.exports},"83e6":function(t,i,e){"use strict";(function(t){e("1fd4");s(e("66fd"));var i=s(e("718e"));function s(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},"8cc8":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("d0f5")),o=a(e("5066"));function a(t){return t&&t.__esModule?t:{default:t}}function n(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var r=function(){Promise.all([e.e("common/vendor"),e.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(e("e345"))}.bind(null,e)).catch(e.oe)},d=function(){e.e("components/paymodel").then(function(){return resolve(e("9d0c"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("components/choose-pay").then(function(){return resolve(e("6e52"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("components/order/choose-address").then(function(){return resolve(e("bba5"))}.bind(null,e)).catch(e.oe)},h=function(){e.e("components/order/submit-order").then(function(){return resolve(e("d3e7"))}.bind(null,e)).catch(e.oe)},p=function(){e.e("components/skeleton/orderDetailsrMock").then(function(){return resolve(e("36a7"))}.bind(null,e)).catch(e.oe)},l={data:function(){var t;return t={grade_rate_amount:0,coupon_id:[],baoyujia:0,fdada:0,bosr:"",xiaoji:0,dizhiid:0,kuaidiyunfei:0,total:0,deliverFee:"",deliveryNo:"",distance:"",fee:0,sNo:"0",canshu1:"",canshu2:"",canshu3:0,array:["请选择","快递","达达"],kuaidi:2,gj:"快递",payment:"",isDistribution:!1,jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",load:!1,returnR:0,cpId:"",title:"确认订单信息",is_subtraction:1,reduce_name:"",pro:[],storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/94661f89895ca9ab42b080e14c49c56.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehui2x.png",ishide:0},n(t,"sNo",""),n(t,"name",""),n(t,"is_distribution",0),n(t,"cart_id",""),n(t,"pay_name",""),n(t,"firstFlag",!0),n(t,"tmplIds",["2KrrJchj92YRKhZZ0SSHz76dmrT0cLBJ2Wfe0","ncs3u3Bmmi0jW7EXAik4KQvxF3JxbaulWNwbLXDto","CZAPo_TqOOeC5K7XYvBeB_LXmyXKIhXkZROArNZDwQ8"]),n(t,"couponList",[]),n(t,"couponList1",[]),n(t,"couponIndex",-1),n(t,"mchCouponIndex",[]),n(t,"canshu",!0),n(t,"is_plugin",!1),n(t,"is_grade",!1),n(t,"total_discount",0),t},mixins:[s.default,o.default],onLoad:function(i){this.getCode(),this.canshu=t.getStorageSync("canshu"),this.$store.state.address_id=this.$store.state.address_id_def,this.cpId=i.product,this.returnR=i.returnR,this.cpId&&3===JSON.parse(this.cpId).findIndex((function(t){return t.sec_id}))&&(this.sec_id=JSON.parse(this.cpId)[3].sec_id,this.seckill=!0,this.activity_id=this.$store.state.seckilldata.activity_id,this.platform_activities_id=this.$store.state.seckilldata.platform_activities_id),1!=i.buy_again&&"true"!=i.buy_again||(this.buy_again=!0),this.order_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,this.cart_id instanceof Array&&(this.cart_id=""),this.cart_id&&t.setStorageSync("cart_id",this.cart_id),i.cart_id&&(this.cart_id=i.cart_id,this.$store.state.cart_id=this.cart_id,t.setStorageSync("cart_id",this.cart_id)),this.cpId&&t.setStorageSync("goodsInfo",this.cpId),i.canshu&&t.setStorageSync("canshu",i.canshu),1==i.isDistribution&&"false"!=i.isDistribution&&(this.isDistribution=!0),this.bargain=i.bargain,this.bargain_id=i.bargain_id,this.order_no=i.order_no,this.pay_name=this.$store.state.pay_lx,this.checkCode()},onShow:function(){this.hc_address_id!=this.$store.state.address_id&&(this.hc_address_id=this.address_id=this.$store.state.address_id),t.getStorageSync("store_choose")&&t.removeStorageSync("store_choose"),this.shop_address_id=t.getStorageSync("shop_address_id"),this._axios("onshow"),this.LaiKeTuiCommon.getWXTmplIds(this),this.fastTap=!1},onUnload:function(){},watch:{baoyujia:function(t){this.canshu3=t}},methods:{mchCouponChange:function(t){var i=this,e=Number(t.currentTarget.dataset.id);this.mchCouponIndex.splice(e,1,t.detail.value);var s=[];this.pro.filter((function(t,e){i.mchCouponIndex.filter((function(i,o){e==o&&(i>=0?s.push(t.coupon_list[i].coupon_id):s.push("0"))}))})),this.couponIndex>=0?s.push(this.couponList1[this.couponIndex].coupon_id):s.push("0"),this.coupon_id=s.join(),this._axios()},bindCouponChange:function(t){var i=this;this.couponIndex=t.detail.value;var e=[];this.pro.filter((function(t,s){i.mchCouponIndex.filter((function(i,o){s==o&&(i>=0?e.push(t.coupon_list[i].coupon_id):e.push("0"))}))})),this.couponIndex>=0?e.push(this.couponList1[this.couponIndex].coupon_id):e.push("0"),e.push(this.couponList1[this.couponIndex].discount_type),this.coupon_id=e.join(),this._axios()},peisongshijian:function(t){var i=this,e=this.bosr,s=[];for(var o in e){var a={};"cid"==o&&(a.cid=e[o],s.push(a)),"pid"==o&&(a.pid=e[o],s.push(a)),"num"==o&&(a.num=e[o],s.push(a))}if(this.gj=this.array[this.kuaidi],2==t.target.value&&2!=this.kuaidi){this.gj="达达";var n={module:"app",action:"DadaFreight",app:"index",address_id:this.dizhiid,access_id:this.$store.state.access_id,store_id:this.canshu1,language:"",product:JSON.stringify(s)};this.$req.post({data:n}).then((function(t){i.baoyujia=t.result.fee,i.xiaoji=t.result.xiaoji,i.deliverFee=t.result.deliverFee,i.deliveryNo=t.result.deliveryNo,i.distance=t.result.distance;var e=i.total-i.fee;i.total=e.toFixed(2),i.fdada=t.result.fee;var s=parseFloat(i.total)+t.result.fee;i.total=s.toFixed(2),i.sNo=t.result.sNo}))}else if(1==t.target.value&&1!=this.kuaidi){this.gj="快递",this.baoyujia=this.fee;var r=this.total-this.fdada;this.total=r.toFixed(2);var d=parseFloat(this.total)+this.fee;this.total=d.toFixed(2)}this.kuaidi=t.target.value},sChange:function(t){this.is_express=t,t?(this.shop_list={id:0},this._axios("onshow")):this._axios("onshow")},_axios:function(){var i=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=t.getStorageSync("goodsInfo"),o={module:"app",action:"order",app:"Settlement",cart_id:this.cart_id,address_id:this.address_id,canshu:this.canshu,coupon_id:this.coupon_id?this.coupon_id:"0"};this.cpId&&(o.product=s||this.cpId,o.cart_id=""),this.is_express||(o.shop_address_id=this.shop_address_id),this.buy_again&&(o.buy_type=1),this.$req.post({data:o}).then((function(s){if(console.log(s,"总体数据请求"),i.bosr=s.products[0].list[0],i.dizhiid=s.address.id,i.xiaoji=s.products[0].shop_subtotal,i.canshu1=s.address.store_id,i.canshu2=s.products[0].list[0].cid,i.dada(),i.canshu=!1,0===s.status||s.hasOwnProperty("code")&&200!==s.code)i.load=!0,t.showToast({title:s.msg,duration:1500,icon:"none"}),setTimeout((function(){i.navBack()}),1500);else{var o=s.address,a=s.coupon_id,n=s.payment,r=s.freight,d=s.password_status,u=s.products,c=s.products_total,h=s.user_money,p=s.enterless,l=s.time_id,_=s.is_distribution,f=s.discount,m=s.grade_rate,g=s.coupon_list,v=s.total_discount;s.grade_rate_amount&&(i.grade_rate_amount=s.grade_rate_amount),u[0].freight_price&&(i.baoyujia=s.products[0].freight_pric,i.kuaidiyunfei=s.products[0].freight_price,i.fee=s.products[0].freight_price),i.total_discount=v;var y=s.coupon_money||0,b=s.reduce_money||0;if(i.coupon_money=y,i.kuaidi=2,2==i.kuaidi){i.baoyujia=i.fee;var x=s.total+i.fee;i.total=x.toFixed(2)}if(i.handleOrderAddress(o,s.shop_list,s.shop_status),g&&g.length>0&&(i.couponList1=g,i.couponList=[],g.filter((function(t,e){i.couponList.push(t.coupon_name),t.coupon_status&&(i.couponIndex=e)}))),i.time_id=l,i.payment=n,i.show_pay_way(),u&&u.length>0){i.pro=u,i.payTitle=u[0].list[0].product_title,i.is_plugin=!u[0].hasOwnProperty("shop_subtotal");var S=!1;""==i.remarks&&(S=!0,i.remarks=[]),i.mchCouponIndex=[],u.filter((function(t){S&&i.remarks.push("");var e=-1;t.couponList=[],t.coupon_list&&t.coupon_list.length&&t.coupon_list.filter((function(i,s){t.couponList.push(i.coupon_name),i.coupon_status&&(e=s)})),i.mchCouponIndex.push(e)}))}i.user_money=Number.parseFloat(h),i.password_status=d,"onshow"!==e?i.coupon_id=a:t.getStorageSync("chooseAddress")&&(i.address=t.getStorageSync("chooseAddress")),i.coupon_status=s.coupon_status,i.enterless=p,i.is_distribution=_,i.discount=f||1,i.is_grade=m>0&&m<1,i.reduce_money=b,i.reduce_name=s.reduce_name,i.is_subtraction=s.is_subtraction,i.products_total=c,i.freightt=parseFloat(r).toFixed(2),i.freight=r,t.setStorageSync("cart_id",i.cart_id),i.load=!0}})).catch((function(t){i.load=!0}))},dada:function(){var i=this,e=this.bosr,s=[];for(var o in e){var a={};"cid"==o&&(a.cid=e[o],s.push(a)),"pid"==o&&(a.pid=e[o],s.push(a)),"num"==o&&(a.num=e[o],s.push(a))}var n={module:"app",action:"DadaFreight",app:"index",address_id:this.dizhiid,access_id:this.$store.state.access_id,store_id:this.canshu1,language:"",product:JSON.stringify(s)};this.$req.post({data:n}).then((function(e){console.log(e,"达达数据"),i.baoyujia=e.result.fee,i.xiaoji=e.result.xiaoji,i.deliverFee=e.result.deliverFee,i.deliveryNo=e.result.deliveryNo,i.distance=e.result.distance,i.distance>3e4&&(t.showToast({title:"距离太远,超出配送范围",duration:2e3,icon:"none"}),setTimeout((function(){t.navigateBack({delta:0})}),2e3));var s=i.total-i.fee;i.total=s.toFixed(2),i.fdada=e.result.fee;var o=parseFloat(i.total)+i.fdada;i.total=o.toFixed(2),i.sNo=e.result.sNo}))}},components:{wxParse:r,paymodel:d,choosePay:u,chooseAddress:c,submitOrder:h,mock:p}};i.default=l}).call(this,e("543d")["default"])},c65c:function(t,i,e){"use strict";var s=e("0846"),o=e.n(s);o.a}},[["83e6","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/store/store"],{1657:function(t,i,e){"use strict";e.r(i);var o=e("f8c4"),s=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);i["default"]=s.a},"573b":function(t,i,e){"use strict";e.r(i);var o=e("b6a1"),s=e("1657");for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("b3e3");var n,r=e("f0c5"),c=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"337ac8b2",null,!1,o["a"],n);i["default"]=c.exports},"9cdc":function(t,i,e){},b3e3:function(t,i,e){"use strict";var o=e("9cdc"),s=e.n(o);s.a},b6a1:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return o}));var s=function(){var t=this,i=t.$createElement;t._self._c},a=[]},caed:function(t,i,e){"use strict";(function(t){e("1fd4");o(e("66fd"));var i=o(e("573b"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])},f8c4:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("a34a")),s=e("2969"),a=e("2f62");function n(t){return t&&t.__esModule?t:{default:t}}function r(t,i,e,o,s,a,n){try{var r=t[a](n),c=r.value}catch(h){return void e(h)}r.done?i(c):Promise.resolve(c).then(o,s)}function c(t){return function(){var i=this,e=arguments;return new Promise((function(o,s){var a=t.apply(i,e);function n(t){r(a,o,s,n,c,"next",t)}function c(t){r(a,o,s,n,c,"throw",t)}n(void 0)}))}}function h(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,o)}return e}function u(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?h(Object(e),!0).forEach((function(i){p(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function p(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var l=function(){e.e("components/skus").then(function(){return resolve(e("6910"))}.bind(null,e)).catch(e.oe)},_={data:function(){return{load:!0,shop_list:[],store_bottom_flag:!1,tabThree:1,saves:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/save.png",share_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"/images/icon/share.png",back2:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",disc:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/2222x.png",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",blueRight:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/blueRight.png",title_index:0,wx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wechat.png",erm_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmShare.png",scImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/sc2x.png",close:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close_bb.png",live:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/live.png",replay:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/replay.png",mch_coupon_bg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_coupon_bg.png",mch_coupon_bgh:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_coupon_bgh.png",mch_coupon_ylq:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_coupon_ylq.png",mch_coupon_yqg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_coupon_yqg.png",mch_fx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_fx.png",mch_dz:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_dz.png",mch_sc:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_sc.png",mch_sch:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/mch_schh.png",shopImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/allgoods_shopImg.png",title:"店铺主页",collStatus:!0,fastTap:!0,shop_id:1,list:"",proList:"",page:1,loadingType:0,shop_name:"",shop_logo:"",collection_num:"",collection_status:"",quantity_on_sale:"",quantity_sold:"",shareHref:"",shareHref2:"",shareContent:"一起来用豪眼光吧！",sharehrefTitle:"一起来用豪眼光吧!",shareImg:"",allPro:"",shareDiv:!1,shareMask:!1,saveEWM:!1,ewmImg:"",is_share:!1,shareWay:[],storeTop_content_img:"https://xiaochengxu.laiketui.com/V3/images/icon1/storeBottom.png",liveImg:"",liveTitle:"",showLive:!1,liveUrl:"",liveStatus:!1,liveGoods:[],is_open:0,coupon_list:[],haveSkuBean:"",num:"",numb:"",banner:[],distance:"",address:""}},components:{skus:l},onLoad:function(i){this.shop_id=i.shop_id,this.is_share=i.is_share;var e=t.getStorageSync("h5_url");this.shareHref=e+"pagesA/store/store?is_share=true&shop_id="+this.shop_id,this.shareHref2="/pagesA/store/store?is_share=true&shop_id="+this.shop_id},onShow:function(){this.getCoupon(),this.axios(),this.loadingType=0,this.page=1},computed:u({width1:function(){var i;return i=150*this.list.length,t.upx2px(i)+"px"}},(0,a.mapState)({_cart_num:"cart_num"})),onShareAppMessage:function(t){return this.shareMask=!1,{title:this.sharehrefTitle,path:this.shareHref2,imageUrl:this.shareImg,bgImgUrl:this.shareImg,success:function(t){}}},onReachBottom:function(){var t=this;if(0==this.loadingType&&(this.loadingType=1,3!=this.tabThree)){var i={module:"app",action:"mch",m:"store_homepage_load",page:this.page,shop_id:this.shop_id,type:this.tabThree};this.list.length>0&&this.$req.post({data:i}).then((function(i){t.page+=1,i.list.length>0?(1!=t.tabThree&&2!=t.tabThree||i.list.filter((function(t){t.vip_price=Number(t.vip_price).toFixed(2),t.vip_yprice=Number(t.vip_yprice).toFixed(2)})),t.list=t.list.concat(i.list),t.loadingType=0):t.loadingType=2}))}},methods:u({_toAllGoods:function(i,e,o){i&&("navigate"==e?(t.navigateTo({url:i}),this.page=1,this.loadingType=0):"switchTab"==e&&(this.page=1,this.loadingType=0,t.switchTab({url:i})))},_confirm:function(i){Object.assign(this.$data,i),this.fastTap&&(this.fastTap=!1,Boolean(this.haveSkuBean)?0==this.num?(t.showToast({title:this.language.store.Tips[0],duration:1e3,icon:"none"}),this.fastTap=!0):0!=this.num&&this._shopping():0==this.num?(t.showToast({title:this.language.store.Tips[0],duration:1e3,icon:"none"}),this.fastTap=!0):(t.showToast({title:this.language.store.Tips[1],duration:1e3,icon:"none"}),this.fastTap=!0))},_shopping:function(i){var e=this;if(this.haveSkuBean){var o={module:"app",action:"product",app:"add_cart",pro_id:this.proid,attribute_id:this.haveSkuBean.cid,num:this.numb,type:"addcart"};this.$req.post({data:o}).then((function(i){var o=i.code,s=i.data,a=i.message;200==o?(t.showToast({title:e.language.store.Tips[2],icon:"none"}),e.$store.state.access_id=s.access_id,e.haveSkuBean="",e.$refs.attrModal._mask_f(),e.fastTap=!0,e.cart_num(e.numb+e._cart_num)):(t.showToast({title:a,icon:"none"}),e.fastTap=!0)})).catch((function(t){e.fastTap=!0}))}else this.fastTap=!0},shopping_j:function(t){var i=this;if(this.fastTap){this.fastTap=!1,this.proid=t;var e={module:"app",action:"product",app:"index",pro_id:t};this.$req.post({data:e}).then((function(t){i.fastTap=!0;var e=t.data,o=(e.collection_id,e.pro),s=(e.comments,e.attrList,e.skuBeanList,e.attribute_list),a=e.qj_price;e.type;i.$refs.attrModal.imgurl=o.img_arr[0],i.$refs.attrModal.num=o.num,i.$refs.attrModal.price=a,i.$refs.attrModal.skuBeanList=s,i.$refs.attrModal.initData(),i.$refs.attrModal._mask_display()})).catch((function(t){i.fastTap=!0}))}},clickCouponBtn:function(i){var e=this;"立即领取"==i.point&&this.isLogin((function(){if(e.fastTap){e.fastTap=!1;var o={module:"app",action:"coupon",app:"receive",id:i.id};e.$req.post({data:o}).then((function(i){var o=i.code;200===o?(t.showToast({title:e.language.store.Tips[3],duration:1500,icon:"none"}),setTimeout((function(){e.getCoupon()}),1500)):(t.showToast({title:i.message,duration:1500,icon:"none"}),e.fastTap=!0)}))}}))},getLiveRoomImg:function(t){var i=this;return c(o.default.mark((function e(){var s,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={module:"app",action:"liveBroadcast",app:"getLiveList",start:i.start,limit:i.limit},e.next=3,i.$req.post({data:s});case 3:a=e.sent,200==a.code&&a.list.room_info.filter((function(e){e.roomid==t&&(i.liveImg=e.cover_img,i.liveTitle=e.name,101==e.live_status?(i.showLive=!0,i.liveStatus=!0,i.liveUrl="plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id=".concat(roomId)):103==e.live_status?(i.liveStatus=!1,i.showLive=!0,i.liveUrl="../../pages/liveReplay/liveReplay?roomID=".concat(e.roomid,"&title=").concat(e.name,"&img=").concat(e.cover_img),i.liveGoods=e.goods,i.replayGoods(e.goods)):i.showLive=!1)}));case 5:case"end":return e.stop()}}),e)})))()},_downEWM:function(){var i=this;t.downloadFile({url:this.ewmImg,success:function(e){var o=e.tempFilePath;t.saveImageToPhotosAlbum({filePath:o,success:function(){t.showToast({title:this.language.store.Tips[4],duration:1500,icon:"none"}),i.shareMask=!1,i.saveEWM=!1},fail:function(){t.showToast({title:this.language.store.Tips[5],duration:1500,icon:"none"})}})},fail:function(){t.showToast({title:this.language.store.Tips[5],duration:1500,icon:"none"})}})},_closeAllMask:function(){this.shareMask=!1,this.saveEWM=!1},_shareDiv:function(){this.shareDiv=!1},_invite:function(t){(0,s.LaiKeTuiInvite)(t,this)},showSaveEWM:function(t){this.shareMask=!1,(0,s.LaiKeTuiShopEWM)(t,this)},_share:function(){},_back:function(){t.navigateBack({delta:1})},changeLoginStatus:function(){this.axios()},toGoods:function(i,e){t.navigateTo({url:"/pages/goods/goods?cid="+e+"&name="+i+"&shop_id="+this.shop_id})},changeTab:function(t){this.tabThree=t,this.page=1,this.loadingType=0,this.axios()},_discover:function(i){this.$store.state.pro_id=i,t.navigateTo({url:"/pages/collection/discover?pro_id="+i})},_goods:function(i){this.$store.state.pro_id=i,t.navigateTo({url:"/pages/goods/goodsDetailed?toback=true&pro_id="+i})},showShareMask:function(i){var e=this;this.is_shop=!0,this.shop_id=i,this.sharehrefTitle=this.shop_list.shop_name,this.shareImg=this.shop_list.shop_logo,this.shareContent=this.shop_list.shop_name;var o=t.getStorageSync("url");o=o.split("index")[0],this.shareHref=o+"H5/#/pagesA/store/store?is_share=true&shop_id="+i,this.shareHref2="/pagesA/store/store?is_share=true&shop_id="+i,this.isLogin((function(){e.shareMask=!0}))},closeShareMask:function(){this.shareMask=!1,this.overflow="scroll"},_collStore:function(){var i=this;this.fastTap&&(this.fastTap=!1,this.LaiKeTuiCommon.lktDelaySetVal(this),this.isLogin((function(){var e={module:"app",action:"mch",m:"collection_shop",shop_id:i.shop_id};i.$req.post({data:e}).then((function(e){200==e.code?(t.showToast({title:e.message,duration:1500,icon:"none"}),setTimeout((function(){i.fastTap=!0,i.axios(),i.title_index=0,i.proList=i.allPro[0]}),0)):t.showToast({title:e.message,duration:1500,icon:"none"})})).catch((function(t){i.fastTap=!0}))})))},getCoupon:function(){var t=this,i={module:"app",action:"coupon",app:"mch_coupon",shop_id:this.shop_id};this.$req.post({data:i}).then((function(i){i.list&&i.list.length>0&&i.list.filter((function(t){t.money=Number(t.money),t.discount=Number(t.discount)})),t.coupon_list=i.list,t.fastTap=!0}))},axios:function(){var i=this;t.showLoading({title:this.language.showLoading.loading,mask:!0});var e=t.getStorageSync("longitude"),o=t.getStorageSync("latitude");this.$req.post({data:{module:"app",action:"mch",m:"store_homepage",shop_id:this.shop_id,type:this.tabThree,longitude:e,latitude:o}}).then((function(e){if(i.load=!1,t.hideLoading(),200==e.code){var o=e.data;1!=i.tabThree&&2!=i.tabThree||o.list.filter((function(t){t.vip_price=Number(t.vip_price).toFixed(2),t.vip_yprice=Number(t.vip_yprice).toFixed(2)})),i.list=o.list,i.shop_name=o.shop_name,i.shop_logo=o.shop_logo,i.is_open=o.is_open,i.collection_num=o.collection_num,i.collection_status=o.collection_status,i.quantity_on_sale=o.quantity_on_sale,i.quantity_sold=o.quantity_sold,i.banner=o.banner,o.distance=(Number(o.distance)/1e3).toFixed(1),i.distance=o.distance,i.address=o.sheng+o.shi+o.xian+o.address,i.sharehrefTitle=i.shop_name,i.shareImg=i.shop_logo,i.shareContent=i.shop_name,i.shop_list=e.data.shop_list,i.getLiveRoomImg(o.roomid)}else t.showToast({title:e.message,duration:1500,icon:"none"})})).catch((function(e){i.load=!1,t.hideLoading()}))},storeTop_content_show:function(){this.store_bottom_flag=!this.store_bottom_flag,this.store_bottom_flag?this.storeTop_content_img=this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/storeTop.png":this.storeTop_content_img=this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/storeBottom.png"}},(0,a.mapMutations)({replayGoods:"SET_REPLAY_GOODS",cart_num:"SET_CART_NUM"}))};i.default=_}).call(this,e("543d")["default"])}},[["caed","common/runtime","common/vendor"]]]);
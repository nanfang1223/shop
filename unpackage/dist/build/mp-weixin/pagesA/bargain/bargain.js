(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/bargain/bargain"],{"1e09":function(t,i,a){"use strict";var o;a.d(i,"b",(function(){return r})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){return o}));var r=function(){var t=this,i=t.$createElement;t._self._c},n=[]},"40da":function(t,i,a){"use strict";var o=a("7c19"),r=a.n(o);r.a},"7c19":function(t,i,a){},8386:function(t,i,a){"use strict";a.r(i);var o=a("ea1b"),r=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(i,t,(function(){return o[t]}))}(n);i["default"]=r.a},b4e28:function(t,i,a){"use strict";(function(t){a("1fd4");o(a("66fd"));var i=o(a("d14c"));function o(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,a("543d")["createPage"])},d14c:function(t,i,a){"use strict";a.r(i);var o=a("1e09"),r=a("8386");for(var n in r)"default"!==n&&function(t){a.d(i,t,(function(){return r[t]}))}(n);a("40da");var e,s=a("f0c5"),u=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,"381f46e0",null,!1,o["a"],e);i["default"]=u.exports},ea1b:function(t,i,a){"use strict";(function(t){function a(t){return e(t)||n(t)||r(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,i){if(t){if("string"===typeof t)return s(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,i):void 0}}function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function e(t){if(Array.isArray(t))return s(t)}function s(t,i){(null==i||i>t.length)&&(i=t.length);for(var a=0,o=new Array(i);a<i;a++)o[a]=t[a];return o}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u={data:function(){return{doodsreturn:0,timeid:0,groupList:[],title:"热门砍价",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"/images/icon1/loading.gif",nobargainImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"/images/icon1/noFind.png",no_bargain:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"/images/icon1/bargainNo.png",brHeadImg:"",load:!1,topTabBar:!0,list:"",page1:1,page2:1,noBargain:!1,loadingType:0,daodi:!1,obj:{},isShow:!1,dialogContent:"",uniLoadMore:!1,hasorder:0}},onLoad:function(i){i.topTabBar?this.doodsreturn=6:(this.topTabBar=!1,t.setNavigationBarTitle({title:"我的砍价"}),this.title="我的砍价"),i.toBack&&(this.doodsreturn=0)},onShow:function(){var t=this;this.page1=1,this.page2=1,this.LaiKeTuiCommon.getLKTApiUrl().then((function(){t.$nextTick((function(){t._axios()}))}))},methods:{toUrl:function(i){t.navigateTo({url:i})},changeLoginStatus:function(){this._axios()},toPay:function(i,a,o,r,n){var e=[];e.push({pid:i}),e.push({cid:a}),e.push({num:1}),e.push({bargain:!0}),e.push({bargain_id:n}),e.push({order_no:r}),e=JSON.stringify(e),t.navigateTo({url:"/pagesA/bargain/bargainDetailsr?product="+e+"&bargain=true&bargain_id="+n+"&order_no="+r})},contBr:function(i,a,o,r,n){t.navigateTo({url:"bargainIng?proId="+i+"&attr_id="+a+"&brStatus="+o+"&order_no="+r+"&bargain_id="+n})},goGoods:function(i,a,o,r,n,e,s,u,g){this.$store.state.pro_id=i;var d=3;0==o?d=4:1==o?d=0:2==o?d=1:3==o&&(d=2),n<=0&&(d=3),n>0&&2==o&&s?t.navigateTo({url:"../../pages/goods/goodsDetailed?bargain=true&isbegin="+g+"&pro_id="+i+"&brStatus="+d+"&attr_id="+a+"&order_no="+r+"&leftTime="+n+"&bargain_id="+e+"&hasorder="+s+"&sNo_id="+u}):t.navigateTo({url:"../../pages/goods/goodsDetailed?bargain=true&pro_id="+i+"&brStatus="+d+"&attr_id="+a+"&order_no="+r+"&leftTime="+n+"&bargain_id="+e+"&isbegin="+g})},setTimeData:function(){var t=this;if(0===this.groupList.length)return!1;for(var i=0;i<this.groupList.length;i++){var a=!0;if(this.topTabBar){var o=--this.groupList[i].leftTime;this.groupList[i].leftTime<0&&(a=!1)}else if(2==this.groupList[i].status){o=--this.groupList[i].canbuy;this.groupList[i].canbuy<=0&&(a=!1)}else{o=--this.groupList[i].leftTime;(this.groupList[i].leftTime<=0||3==this.groupList[i].status||-1==this.groupList[i].status)&&(a=!1)}if(a){var r=Math.floor(parseInt(o)/86400),n=Math.floor(o/3600-24*r),e=Math.floor((o-60*n*60-24*r*60*60)/60),s=o%60;n<10&&(n="0"+n),e<10&&(e="0"+e),s<10&&(s="0"+s),0==r&&(r="0"),this.groupList[i].hour=isNaN(n)?"00":n,this.groupList[i].mniuate=isNaN(n)?"00":e,this.groupList[i].second=isNaN(n)?"00":s,this.groupList[i].day=isNaN(n)?"00":r}else this.groupList[i].hour="00",this.groupList[i].mniuate="00",this.groupList[i].second="00",this.groupList[i].day="0"}0===this.timeid&&(this.timeid=setInterval((function(){for(var i=0;i<t.groupList.length;i++){var a=!0;if(t.topTabBar){var o=--t.groupList[i].leftTime;t.groupList[i].leftTime<0&&(a=!1)}else if(2==t.groupList[i].status){o=--t.groupList[i].canbuy;t.groupList[i].canbuy<=0&&(a=!1)}else{o=--t.groupList[i].leftTime;(t.groupList[i].leftTime<=0||3==t.groupList[i].status||-1==t.groupList[i].status)&&(a=!1)}if(a){var r=Math.floor(parseInt(o)/86400),n=Math.floor(o/3600-24*r),e=Math.floor((o-60*n*60-24*r*60*60)/60),s=o%60;n<10&&(n="0"+n),e<10&&(e="0"+e),s<10&&(s="0"+s),0==r&&(r="0"),t.groupList[i].hour=n,t.groupList[i].mniuate=e,t.groupList[i].second=s,t.groupList[i].day=r}else t.groupList[i].hour="00",t.groupList[i].mniuate="00",t.groupList[i].second="00",t.groupList[i].day="0"}}),1e3)),setTimeout((function(){this.list=this.groupList}),0)},closeDialog:function(){this.isShow=!1},clickConfirm:function(){this.closeDialog(),t.navigateTo({url:"bargainIng?proId="+this.obj.proId+"&attr_id="+this.obj.attr_id+"&brStatus="+this.obj.brStatus+"&bargain_id="+this.obj.bargain_id+"&order_no="+this.obj.order_no+"&hasorder="+this.hasorder})},toBargainIng:function(i,a,o,r,n,e,s){var u=this;if(!(s<=0)){var g={module:"app",action:"login",app:"token"};this.$req.post({data:g}).then((function(g){if(200==g.code&&1===g.login_status)if(0!=o&&s>0){var d={4:u.language.bargain.promptContent[0],0:u.language.bargain.promptContent[1],1:u.language.bargain.promptContent[2],2:u.language.bargain.promptContent[3],3:u.language.bargain.promptContent[4]};u.obj={proId:i,attr_id:a,brStatus:o,order_no:r,bargain_id:n,hasorder:e},u.dialogContent=o<0?-1==o?d[0]:d[4]:d[o],u.isShow=!0}else 0==o&&t.navigateTo({url:"bargainIng?proId="+i+"&attr_id="+a+"&brStatus="+o+"&bargain_id="+n+"&order_no="+r});else u.isLogin((function(){}))}))}},changeTabBar:function(){this.navTo("/pagesA/bargain/bargain",!0,this)},_axios:function(){var i=this;this.groupList=[],this.loadingType=0,this.daodi=!1;var o={module:"app",action:"bargain"};this.topTabBar?(o.m="bargainhome",o.page=this.page1):(o.m="mybargain",o.page=this.page2),this.$req.post({data:o}).then((function(o){var r;(i.load=!0,200==o.code)?(i.uniLoadMore=!0,i.brHeadImg=o.img,i.list=o.list,(r=i.groupList).push.apply(r,a(o.list)),i.setTimeData(),i.noBargain=!o.list.length,o.list.length<10&&(i.loadingType=2,i.daodi=!0)):404==o.code?i.topTabBar=!0:(i.list=[],t.showToast({title:o.message,icon:"none",duration:1500}))}))}},onReachBottom:function(){var t=this;if(this.daodi)return!1;var i={module:"app",action:"bargain"};this.topTabBar?(i.m="bargainhome",i.page=++this.page1):(i.m="mybargain",i.page=++this.page2),this.loadingType=1,this.$req.post({data:i}).then((function(i){var o;200==i.code&&(i.list.length?(t.list=t.list.concat(i.list),(o=t.groupList).push.apply(o,a(i.list)),i.list.length<10&&(t.loadingType=2,t.topTabBar?t.page1=1:t.page2=1,t.daodi=!0)):t.loadingType=2)}))}};i.default=u}).call(this,a("543d")["default"])}},[["b4e28","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/bargain/bargainIng"],{"393f":function(e,i,t){},"4e31":function(e,i,t){"use strict";t.r(i);var a=t("673c"),n=t.n(a);for(var r in a)"default"!==r&&function(e){t.d(i,e,(function(){return a[e]}))}(r);i["default"]=n.a},"673c":function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("a34a")),n=r(t("c612"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,i,t,a,n,r,s){try{var o=e[r](s),u=o.value}catch(l){return void t(l)}o.done?i(u):Promise.resolve(u).then(a,n)}function o(e){return function(){var i=this,t=arguments;return new Promise((function(a,n){var r=e.apply(i,t);function o(e){s(r,a,n,o,u,"next",e)}function u(e){s(r,a,n,o,u,"throw",e)}o(void 0)}))}}var u={data:function(){return{cat:e.getStorageSync("endurl")+"images/icon/catIcon.png",headsimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",close:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close_bb.png",saves:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/save.png",wx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wechat.png",logo:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lktlogo.png",ewm:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/1553677239.png",barExp:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/barExp.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/loading.gif",brHeadImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/brHeadImg.png",celebrate:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/celebrate.png",upList:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/upList.png",loseEfficacyImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/loseEfficacy@2x.png",loseImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/kj_lose.png",user_name:"",headimgurl:"",bargain_id:"",friendOver:!1,a:"",self:"",helpListStatus:!0,friend:!1,ruleDiv:!1,list:"",order_no:"",orderNo:"",providerList:"",details:[],shareContent:"一起来豪眼光吧！",shareHref:"",brPrice:"",hbStatus:!1,shareDiv:!1,title:"超值砍价",fastTap:!0,load:!1,cogDiv:!1,proId:"",brStatus:"",attr_id:"",help_num:0,help_list:[],islogin:!0,order_id:"",shareWay:[{name:"二维码分享",imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmIcon.png"}],loseEfficacy:!1,pageFlag:!1,_setTime1:""}},onShow:function(){var e=this.language.bargainIng.shareWay;this.shareWay.filter((function(i,t){i.type=i.name,i.name=e[t]})),this.shareWay=this.shareWay},onLoad:function(i){var t=this;return o(a.default.mark((function n(){var r;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.setLang(),t.shareContent=t.language.showModal.shareContent,r=e.getExtConfigSync?e.getExtConfigSync():{},(r.url||r.kefu_url)&&(t.$store.state.kefu_url=r.kefu_url),e.showShareMenu({withShareTicket:!0}),t.isLogin((function(){})),t.friend=i.friend,t.friend&&e.setClipboardData({data:""}),e.getProvider({service:"share",success:function(e){for(var i=[],a=0;a<e.provider.length;a++)switch(e.provider[a]){case"weixin":i.push({name:"分享到微信好友",id:"weixin",sort:0}),i.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline",sort:1});break;case"sinaweibo":i.push({name:"分享到新浪微博",id:"sinaweibo",sort:2});break;case"qq":i.push({name:"分享到QQ",id:"qq",sort:3});break;default:break}t.providerList=i.sort((function(e,i){return e.sort-i.sort}))},fail:function(i){e.showModal({content:t.language.showModal.loginNo,confirmText:t.language.showModal.confirm,cancelText:t.language.showModal.cancel,showCancel:!1})}}),t.proId=i.proId,t.attr_id=i.attr_id,t.brStatus=i.brStatus,t.order_no=i.order_no,t.orderNo=i.order_no,t.bargain_id=i.bargain_id,a.next=17,t._axios();case 17:case"end":return a.stop()}}),n)})))()},onShareAppMessage:function(e){return e.from,{title:this.list.title,path:"/pagesA/bargain/bargainIng?proId="+this.proId+"&attr_id="+this.attr_id+"&order_no="+this.order_no+"&brStatus="+this.brStatus+"&friend=true&bargain_id="+this.bargain_id,imageUrl:this.list.img,bgImgUrl:this.list.img,success:function(e){}}},methods:{_back1:function(){this.outtime()},timeout:function(){this.outtime()},outtime:function(){e.showToast({title:this.language.bargainIng.noLogin,icon:"none",duration:1500}),setTimeout((function(){e.navigateTo({url:"/pages/login/login?landing_code=1"})}),1e3)},go_order:function(){e.navigateTo({url:"../../pages/order/order?order_id="+this.order_id+"&showPay=true"})},changeLoginStatus:function(){this._axios()},_back:function(){this.flag=!1,this.friend?e.switchTab({url:"../../pages/tabBar/home"}):e.navigateBack({delta:1})},_closeAllMask:function(){this.hbStatus=!1,this.shareDiv=!1},goGoods:function(i,t,a,n,r,s,o){console.log("=---------------self---------------"+a),this.$store.state.pro_id=i,1==o?e.navigateTo({url:"../../pages/goods/goodsDetailed?&bargain=true&isbegin=1&brStatus="+a+"&attr_id="+t+"&order_no="+n+"&leftTime="+r+"&bargain_id="+s+"&hasorder="+o+"&sNo_id="+this.order_id+"&pro_id="+i}):e.navigateTo({url:"/pages/goods/goodsDetailed?&bargain=true&isbegin=1&brStatus="+a+"&attr_id="+t+"&order_no="+n+"&leftTime="+r+"&bargain_id="+s+"&sNo_id="+this.order_id+"&pro_id="+i}),this.pageFlag=!0},goPay:function(){var i=[];i.push({pid:this.proId}),i.push({cid:this.attr_id}),i.push({num:1}),i.push({bargain:!0}),i.push({bargain_id:this.bargain_id}),i.push({order_no:this.order_no}),i=JSON.stringify(i),e.navigateTo({url:"/pagesA/bargain/bargainDetailsr?product="+i+"&bargain=true&bargain_id="+this.bargain_id+"&order_no="+this.order_no})},goBr:function(){e.navigateTo({url:"bargain?topTabBar=true"})},_helpBar:function(){var e=this;this.islogin||this.isLogin((function(){}));var i={module:"app",action:"bargain",goods_id:this.proId,attr_id:this.attr_id,order_no:this.orderNo,m:"helpbargain"};this.$req.post({data:i}).then((function(i){200==i.code?(e.friendOver=!0,e.cogDiv=!0,e.brPrice=i.randprice,e.list.success_money=(parseFloat(e.list.success_money)+i.randprice).toFixed(2),e.list.original_price=(parseFloat(e.list.original_price)-i.randprice).toFixed(2),e.help_list.push({bargain_money:i.randprice,headimgurl:i.headimgurl,user_name:i.user_name})):404==i.code&&e.isLogin((function(){}))}))},_helpList:function(e){this.helpListStatus=e},_ruleDiv:function(e){var i=this;if(this.ruleDiv=e,!e)return!1;var t={m:"getRule",action:"bargain",module:"app"};this.$req.post({data:t}).then((function(e){var t="<div style='padding-left:8px;padding-right:8px;'>"+e.rule.replace(new RegExp("<view","gm"),"<p").replace(new RegExp("</view>","gm"),"</p>")+"</div>",a=t.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"');a=a.replace("<div style='padding-left:8px;padding-right:8px;'>",'<div style="padding: 0 15px;">'),i.details=(0,n.default)(a)}))},saveImg:function(){var i=this;e.downloadFile({url:this.ewm,success:function(t){var a=t.tempFilePath;e.saveImageToPhotosAlbum({filePath:a,success:function(){e.showToast({title:i.language.bargainIng.saveImgOk,duration:1500,icon:"none"}),i.shareDiv=!1,i.hbStatus=!1}})}})},_shareDiv:function(i){var t=e.getStorageSync("h5_url");this.shareHref=t+"pagesA/bargain/bargainIng?proId="+this.proId+"&attr_id="+this.attr_id+"&order_no="+this.order_no+"&brStatus="+this.brStatus+"&friend=true&bargain_id="+this.bargain_id,this.shareDiv=i},hideMask:function(){this.cogDiv=!1},_invite:function(i){var t=this;if(this.access_id){var a=e.getStorageSync("h5_url")+"pagesA/bargain/bargainIng?proId="+this.proId+"&attr_id="+this.attr_id+"&order_no="+this.order_no+"&brStatus="+this.brStatus+"&friend=true&bargain_id="+this.bargain_id;if("二维码分享"==i){var n={module:"app",action:"getcode",m:"share",order_no:this.order_no,proId:this.proId,store_type:1};this.$req.post({data:n}).then((function(i){t.ewm=e.getStorageSync("endurl")+i.imgUrl,t.hbStatus=!0,t.shareDiv=!0}))}else"朋友圈"==i?e.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:a,title:this.list.title,summary:this.shareContent,imageUrl:this.list.img,success:function(){t.fastTap=!0,e.showToast({title:t.language.bargainIng.shareOk,icon:"none"})},fail:function(){t.fastTap=!0,e.showToast({title:t.language.bargainIng.shareFail,icon:"none"})}}):"微信"==i?e.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a,title:this.list.title,summary:this.shareContent,imageUrl:this.list.img,success:function(){t.fastTap=!0,e.showToast({title:t.language.bargainIng.shareOk,icon:"none"})},fail:function(){t.fastTap=!0,e.showToast({title:t.language.bargainIng.shareFail,icon:"none"})}}):"复制链接"==i&&e.setClipboardData({data:a,success:function(){t.$store.state.isMe=!0,e.showToast({title:"复制成功",duration:1500,icon:"none"})}})}else e.navigateTo({url:"/pages/login/login?landing_code=1"})},_axios:function(){var i=this;return o(a.default.mark((function t(){var n,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return clearTimeout(i._setTime1),n={module:"app",action:"bargain",goods_id:i.proId,attr_id:i.attr_id,order_no:i.order_no,bargain_id:i.bargain_id},i.friend?(n.m="getgoodsdetail",n.isHelp=1):0==i.brStatus?n.m="createbargain":n.m="getgoodsdetail",t.next=5,i.$req.post({data:n});case 5:if(r=t.sent,200!=r.code){t.next=26;break}return t.next=9,i.setTimeData(r.list);case 9:i.brPrice=r.bargain_money,i.help_list=r.help_list,i.list=r.list,i.list.selfstatus||0==i.list.selfstatus||(i.list.selfstatus=i.list.status),i.loseEfficacy=r.loseEfficacy,i.bargain_id=r.list.bargain_id,0!=i.brStatus&&0==r.islogin&&(i.islogin=!1),i.user_name=r.help_list[0].user_name,i.headimgurl=r.help_list[0].headimgurl,r.list.sNo_id&&(i.order_id=r.list.sNo_id),0==i.brStatus&&(i.bargain_id=r.list.bargain_id,r.order_no&&"undefined"!=r.order_no&&(i.order_no=r.order_no)),1==r.isMyShareLink&&(i.friend=!1),500==r.status?(r.message&&e.showToast({title:r.message,icon:"none"}),i.cogDiv=!1):i.cogDiv=!0,i.self=r.self,i.friend&&500==r.status&&(i.friendOver=!0,i.cogDiv=!1),t.next=27;break;case 26:404==r.code?(i.brPrice=r.bargain_money,i.help_list=r.help_list,i.list=r.list,i.setTimeData(r.list),i.loseEfficacy=r.loseEfficacy,r.help_list?(i.self=r.help_list[0],i.user_name=r.help_list[0].user_name,i.headimgurl=r.help_list[0].headimgurl):(i.islogin=!1,i.isLogin((function(){})))):e.showToast({title:r.message,icon:"none"});case 27:i.help_num=i.help_list.length;case 28:case"end":return t.stop()}}),t)})))()},setTimeData:function(e){var i=this;return o(a.default.mark((function t(){var n,r,s,o,u,l,d;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=i,r=e,t.prev=2,r.leftTime,t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](2),t.abrupt("return",!1);case 9:s=r.leftTime-1,o=Math.floor(s/60/60/24),u=Math.floor(s/3600-24*o),l=Math.floor((s-60*u*60-24*o*60*60)/60),d=s%60,u<10&&(u="0"+u),l<10&&(l="0"+l),d<10&&(d="0"+d),r.hour=u,r.mniuate=l,r.second=d,r.day=o,r.leftTime<=0&&(r.hour="00",r.mniuate="00",r.second="00",r.day=""),n.list=r,clearTimeout(n._setTime1),n._setTime1=setTimeout((function(){try{r.leftTime}catch(u){return!1}var i=--r.leftTime,t=Math.floor(i/60/60/24),a=Math.floor(i/3600-24*t),s=Math.floor((i-60*a*60-24*t*60*60)/60),o=i%60;a<10&&(a="0"+a),s<10&&(s="0"+s),o<10&&(o="0"+o),r.hour=a,r.mniuate=s,r.second=o,r.day=t,r.leftTime<=0&&(r.hour="00",r.mniuate="00",r.second="00",r.day=""),n.list=r,n.setTimeData(e)}),1e3);case 25:case"end":return t.stop()}}),t,null,[[2,6]])})))()}},computed:{width1:function(){return this.a=this.list.success_money/this.list.free_money*100,this.a+"%"}}};i.default=u}).call(this,t("543d")["default"])},c3f8:function(e,i,t){"use strict";(function(e){t("1fd4");a(t("66fd"));var i=a(t("e77e"));function a(e){return e&&e.__esModule?e:{default:e}}e(i.default)}).call(this,t("543d")["createPage"])},e77e:function(e,i,t){"use strict";t.r(i);var a=t("f74a"),n=t("4e31");for(var r in n)"default"!==r&&function(e){t.d(i,e,(function(){return n[e]}))}(r);t("f581");var s,o=t("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"82ff7e40",null,!1,a["a"],s);i["default"]=u.exports},f581:function(e,i,t){"use strict";var a=t("393f"),n=t.n(a);n.a},f74a:function(e,i,t){"use strict";var a;t.d(i,"b",(function(){return n})),t.d(i,"c",(function(){return r})),t.d(i,"a",(function(){return a}));var n=function(){var e=this,i=e.$createElement;e._self._c},r=[]}},[["c3f8","common/runtime","common/vendor"]]]);
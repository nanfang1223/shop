(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/bargain/bargainDetailsr"],{"010b":function(t,e,i){"use strict";var o=i("02bd"),s=i.n(o);s.a},"02bd":function(t,e,i){},"51f9":function(t,e,i){"use strict";i.r(e);var o=i("ad85"),s=i.n(o);for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=s.a},"90c9":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o}));var s=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"976c":function(t,e,i){"use strict";(function(t){i("1fd4");o(i("66fd"));var e=o(i("ba94"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},ad85:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("d0f5")),s=n(i("5066"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){Promise.all([i.e("common/vendor"),i.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(i("e345"))}.bind(null,i)).catch(i.oe)},r=function(){i.e("components/paymodel").then(function(){return resolve(i("9d0c"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/choose-pay").then(function(){return resolve(i("6e52"))}.bind(null,i)).catch(i.oe)},c=function(){i.e("components/order/choose-address").then(function(){return resolve(i("bba5"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/order/submit-order").then(function(){return resolve(i("d3e7"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/skeleton/orderDetailsrMock").then(function(){return resolve(i("36a7"))}.bind(null,i)).catch(i.oe)},_={data:function(){return{payment:"",isDistribution:!1,jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",load:!1,returnR:0,cpId:"",title:"确认订单信息",is_subtraction:1,reduce_name:"",pro:[],storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehei2x.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehui2x.png",ishide:0,sNo:"",name:"",is_distribution:0,cart_id:"",pay_name:"",firstFlag:!0,tmplIds:["2KrrJchj92YRKhZZ0SSHz76dmrT0cLBJ2Wfe0","ncs3u3Bmmi0jW7EXAik4KQvxF3JxbaulWNwbLXDto","CZAPo_TqOOeC5K7XYvBeB_LXmyXKIhXkZROArNZDwQ8"],grade_rate_amount:0,couponList:[],couponList1:[],couponIndex:-1,mchCouponIndex:[],canshu:!0,is_plugin:!1,is_grade:!1,total_discount:0}},mixins:[o.default,s.default],computed:{sub_total:function(){return(Number.parseFloat(this.freight)+Number.parseFloat(this.products_total)).toFixed(2)},membership_price:function(){var t=Number.parseFloat(this.freight)+Number.parseFloat(this.products_total);return(t-this.grade_rate_amount-Number.parseFloat(this.freight)).toFixed(2)}},onLoad:function(e){this.getCode(),this.canshu=t.getStorageSync("canshu"),this.$store.state.address_id=this.$store.state.address_id_def,this.cpId=e.product,this.returnR=e.returnR,this.cpId&&3===JSON.parse(this.cpId).findIndex((function(t){return t.sec_id}))&&(this.sec_id=JSON.parse(this.cpId)[3].sec_id,this.seckill=!0,this.activity_id=this.$store.state.seckilldata.activity_id,this.platform_activities_id=this.$store.state.seckilldata.platform_activities_id),1!=e.buy_again&&"true"!=e.buy_again||(this.buy_again=!0),this.order_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,this.cart_id instanceof Array&&(this.cart_id=""),this.cart_id&&t.setStorageSync("cart_id",this.cart_id),e.cart_id&&(this.cart_id=e.cart_id,this.$store.state.cart_id=this.cart_id,t.setStorageSync("cart_id",this.cart_id)),this.cpId&&t.setStorageSync("goodsInfo",this.cpId),e.canshu&&t.setStorageSync("canshu",e.canshu),1==e.isDistribution&&"false"!=e.isDistribution&&(this.isDistribution=!0),this.bargain=e.bargain,this.bargain_id=e.bargain_id,this.order_no=e.order_no,this.pay_name=this.$store.state.pay_lx,this.checkCode(),this._axios()},onShow:function(){this.hc_address_id!=this.$store.state.address_id&&(this.hc_address_id=this.address_id=this.$store.state.address_id),t.getStorageSync("store_choose")&&t.removeStorageSync("store_choose"),this.shop_address_id=t.getStorageSync("shop_address_id"),this._axios("onshow"),this.LaiKeTuiCommon.getWXTmplIds(this),this.fastTap=!1},onUnload:function(){},methods:{mchCouponChange:function(t){var e=this,i=Number(t.currentTarget.dataset.id);this.mchCouponIndex.splice(i,1,t.detail.value);var o=[];this.pro.filter((function(t,i){e.mchCouponIndex.filter((function(e,s){i==s&&(e>=0?o.push(t.coupon_list[e].coupon_id):o.push("0"))}))})),this.couponIndex>=0?o.push(this.couponList1[this.couponIndex].coupon_id):o.push("0"),this.coupon_id=o.join(),this._axios()},bindCouponChange:function(t){var e=this;this.couponIndex=t.detail.value;var i=[];this.pro.filter((function(t,o){e.mchCouponIndex.filter((function(e,s){o==s&&(e>=0?i.push(t.coupon_list[e].coupon_id):i.push("0"))}))})),this.couponIndex>=0?i.push(this.couponList1[this.couponIndex].coupon_id):i.push("0"),this.coupon_id=i.join(),this._axios()},sChange:function(t){if(this.is_express=t,t)this.shop_list={id:0},this._axios("onshow");else{this.freight=this.freightt=0;for(var e=0;e<this.pro.length;e++)this.pro[e].shop_subtotal=this.pro[e].shop_subtotal-this.pro[e].freight_price,this.pro[e].freight_price=0}},_axios:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=t.getStorageSync("goodsInfo"),s=null;s={module:"app",action:"order",product_type:"KJ",app:"Settlement",bargain_id:this.bargain_id,address_id:this.address_id,coupon_id:this.coupon_id?this.coupon_id:"0"},this.cpId&&(s.product=o||this.cpId,s.cart_id=""),this.is_express||(s.shop_address_id=this.shop_address_id),this.$req.post({data:s}).then((function(o){if(e.canshu=!1,0===o.status||o.hasOwnProperty("code")&&200!==o.code)return e.load=!0,t.showToast({title:o.msg,duration:1500,icon:"none"}),setTimeout((function(){e.navBack()}),1500),!1;var s=o.address,n=o.coupon_id,a=o.payment,r=o.freight,d=o.password_status,c=o.products,u=o.products_total,h=o.total,_=o.user_money,p=o.enterless,l=o.time_id,f=o.is_distribution,m=o.discount,g=o.grade_rate,b=o.coupon_list,v=o.total_discount,y=o.grade_rate_amount;e.total_discount=v;var x=o.coupon_money||0,S=o.reduce_money||0;e.coupon_money=x,e.total=Number.parseFloat(h).toFixed(2),e.handleOrderAddress(s,o.shop_list,o.shop_status),b&&b.length>0&&(e.couponList1=b,e.couponList=[],b.filter((function(t,i){e.couponList.push(t.coupon_name),t.coupon_status&&(e.couponIndex=i)}))),e.time_id=l,e.payment=a,c&&c.length>0&&(e.pro=c,e.payTitle=c[0].list[0].product_title,e.is_plugin=!c[0].hasOwnProperty("shop_subtotal")),e.user_money=Number.parseFloat(_),s&&(e.$store.state.address_id_def||(e.$store.state.address_id_def=s.id)),e.password_status=d,"onshow"!==i?e.coupon_id=n:t.getStorageSync("chooseAddress")&&(e.address=t.getStorageSync("chooseAddress")),e.coupon_status=o.coupon_status,e.enterless=p,e.is_distribution=f,e.discount=m||1,e.is_grade=g>0&&g<1,e.is_grade?(e.grade_rate_amount=y,0==y&&(e.is_grade=!1)):e.grade_rate_amount=0,e.total=Number.parseFloat(h),e.reduce_money=S,e.reduce_name=o.reduce_name,e.is_subtraction=o.is_subtraction,e.products_total=u,e.freightt=parseFloat(r).toFixed(2),e.freight=r,e.show_pay_way(),t.setStorageSync("cart_id",e.cart_id),e.load=!0})).catch((function(t){e.load=!0}))}},components:{wxParse:a,paymodel:r,choosePay:d,chooseAddress:c,submitOrder:u,mock:h}};e.default=_}).call(this,i("543d")["default"])},ba94:function(t,e,i){"use strict";i.r(e);var o=i("90c9"),s=i("51f9");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("010b");var a,r=i("f0c5"),d=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"c3c45ba6",null,!1,o["a"],a);e["default"]=d.exports}},[["976c","common/runtime","common/vendor"]]]);